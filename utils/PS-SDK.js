const a0_0x1318b1=a0_0x9fbb;(function(_0x17e010,_0x45208a){const _0x42f8aa=a0_0x9fbb,_0x5a5607=_0x17e010();while(!![]){try{const _0x3e2825=parseInt(_0x42f8aa(0x132))/0x1+-parseInt(_0x42f8aa(0x143))/0x2+-parseInt(_0x42f8aa(0x125))/0x3+-parseInt(_0x42f8aa(0x12d))/0x4+-parseInt(_0x42f8aa(0x144))/0x5+parseInt(_0x42f8aa(0x102))/0x6*(-parseInt(_0x42f8aa(0xfb))/0x7)+parseInt(_0x42f8aa(0xf3))/0x8*(parseInt(_0x42f8aa(0xe8))/0x9);if(_0x3e2825===_0x45208a)break;else _0x5a5607['push'](_0x5a5607['shift']());}catch(_0x363eec){_0x5a5607['push'](_0x5a5607['shift']());}}}(a0_0x24b8,0x887ad));const {app,action,core,imaging}=require(a0_0x1318b1(0x155)),{batchPlay}=action,fs=require(a0_0x1318b1(0xe1))[a0_0x1318b1(0x127)][a0_0x1318b1(0x136)],formats=require(a0_0x1318b1(0xe1))[a0_0x1318b1(0x127)][a0_0x1318b1(0x11c)],executeAsModal=core[a0_0x1318b1(0xf1)],PngEncoder=require(a0_0x1318b1(0x13f));let isProcessing=![];function a0_0x9fbb(_0x27a376,_0xc36303){_0x27a376=_0x27a376-0xda;const _0x24b807=a0_0x24b8();let _0x9fbb75=_0x24b807[_0x27a376];if(a0_0x9fbb['LaQHYh']===undefined){var _0x418dcd=function(_0x422698){const _0xc01ed1='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x2bcfc6='',_0x3120eb='';for(let _0x52955c=0x0,_0x417a48,_0x52181b,_0xca1b08=0x0;_0x52181b=_0x422698['charAt'](_0xca1b08++);~_0x52181b&&(_0x417a48=_0x52955c%0x4?_0x417a48*0x40+_0x52181b:_0x52181b,_0x52955c++%0x4)?_0x2bcfc6+=String['fromCharCode'](0xff&_0x417a48>>(-0x2*_0x52955c&0x6)):0x0){_0x52181b=_0xc01ed1['indexOf'](_0x52181b);}for(let _0x4f7def=0x0,_0x37402d=_0x2bcfc6['length'];_0x4f7def<_0x37402d;_0x4f7def++){_0x3120eb+='%'+('00'+_0x2bcfc6['charCodeAt'](_0x4f7def)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x3120eb);};a0_0x9fbb['UbBRfy']=_0x418dcd,a0_0x9fbb['lmNwAL']={},a0_0x9fbb['LaQHYh']=!![];}const _0x254e2a=_0x24b807[0x0],_0x2b4b07=_0x27a376+_0x254e2a,_0x4200c8=a0_0x9fbb['lmNwAL'][_0x2b4b07];return!_0x4200c8?(_0x9fbb75=a0_0x9fbb['UbBRfy'](_0x9fbb75),a0_0x9fbb['lmNwAL'][_0x2b4b07]=_0x9fbb75):_0x9fbb75=_0x4200c8,_0x9fbb75;}const val=_0x2bcfc6=>{const _0x273074=a0_0x1318b1;if(_0x2bcfc6===null||_0x2bcfc6===undefined)return 0x0;if(typeof _0x2bcfc6===_0x273074(0xfa))return _0x2bcfc6;if(typeof _0x2bcfc6===_0x273074(0x10d)){if(typeof _0x2bcfc6[_0x273074(0x139)]===_0x273074(0xfa))return _0x2bcfc6[_0x273074(0x139)];if(_0x2bcfc6[_0x273074(0xfc)]!==undefined)return _0x2bcfc6[_0x273074(0xfc)];for(let _0x52955c in _0x2bcfc6){if(typeof _0x2bcfc6[_0x52955c]===_0x273074(0x10d)){const _0x417a48=val(_0x2bcfc6[_0x52955c]);if(typeof _0x417a48===_0x273074(0xfa))return _0x417a48;}}}const _0x3120eb=parseFloat(_0x2bcfc6);return isNaN(_0x3120eb)?0x0:_0x3120eb;};async function getSelectionInfo(){const _0x59f80e=a0_0x1318b1;try{const _0x52181b=require('photoshop')[_0x59f80e(0x153)][_0x59f80e(0xff)];if(_0x52181b&&_0x52181b[_0x59f80e(0xe4)]){const _0xca1b08=_0x52181b[_0x59f80e(0xe4)][_0x59f80e(0x13e)];if(_0xca1b08&&val(_0xca1b08['right'])-val(_0xca1b08[_0x59f80e(0x154)])>0x0)return _0xca1b08;}}catch(_0x4f7def){}try{const _0x37402d=await action['batchPlay']([{'_obj':_0x59f80e(0xdc),'_target':[{'_ref':'property','_property':_0x59f80e(0xe4)},{'_ref':_0x59f80e(0x120),'_enum':'ordinal','_value':'targetEnum'}]}],{'synchronousExecution':!![]});if(_0x37402d&&_0x37402d[0x0]&&_0x37402d[0x0][_0x59f80e(0xe4)]){const _0x3a4f9c=_0x37402d[0x0]['selection'];return _0x3a4f9c;}}catch(_0x1cfbec){}return null;}async function fetchPixels(_0x5172fa,{layerID:_0x1437b7,targetSize:_0x46ac62,applyAlpha:applyAlpha=!![]}={}){const _0x125e43=a0_0x1318b1,_0x269e43={'documentID':_0x5172fa['id'],'applyAlpha':applyAlpha};if(_0x1437b7)_0x269e43[_0x125e43(0x12e)]=_0x1437b7;if(_0x46ac62)_0x269e43[_0x125e43(0x12f)]=_0x46ac62;const _0x46ba76=await imaging[_0x125e43(0xf7)](_0x269e43),_0x498e9b=await _0x46ba76['imageData']['getData'](),_0x5f5152=_0x498e9b&&_0x498e9b[_0x125e43(0x138)]?new Uint8Array(_0x498e9b['buffer'],_0x498e9b['byteOffset'],_0x498e9b[_0x125e43(0x10a)]):_0x498e9b;return{'data':_0x5f5152,'w':_0x46ba76[_0x125e43(0x13d)][_0x125e43(0x105)],'h':_0x46ba76[_0x125e43(0x13d)]['height'],'cC':_0x46ba76['imageData']['components'],'dispose':()=>_0x46ba76['dispose']?.()};}async function saveBufferToTemp(_0x4c032d,_0x47d766){const _0x2b50b6=a0_0x1318b1;if(!_0x4c032d||_0x4c032d['byteLength']===0x0||!_0x47d766)return null;try{const _0x3ee6c6=await fs['getTemporaryFolder'](),_0x2544ed=await _0x3ee6c6[_0x2b50b6(0x14d)](_0x47d766,{'overwrite':!![]});return await _0x2544ed[_0x2b50b6(0xeb)](_0x4c032d,{'format':formats[_0x2b50b6(0x14b)]}),_0x2544ed[_0x2b50b6(0x104)];}catch(_0x162490){return null;}}async function getTempFilesInfo(){const _0x3de912=a0_0x1318b1;try{const _0xcdbdf5=await fs[_0x3de912(0x109)](),_0x285b47=await _0xcdbdf5[_0x3de912(0xf0)]();return{'success':!![],'files':_0x285b47[_0x3de912(0x137)](_0x32ca2b=>_0x32ca2b['isFile'])['map'](_0x167a5f=>({'name':_0x167a5f['name'],'nativePath':_0x167a5f['nativePath'],'modDate':_0x167a5f[_0x3de912(0xe6)],'url':_0x3de912(0xfe)+_0x167a5f[_0x3de912(0x104)]}))};}catch(_0x486dbf){return{'success':![],'error':_0x486dbf[_0x3de912(0x152)]};}}async function deleteFile(_0x47b76b){const _0x450597=a0_0x1318b1;try{if(!_0x47b76b)return{'success':![],'error':_0x450597(0xdd)};let _0x25b400=decodeURIComponent(_0x47b76b[_0x450597(0x113)](/^(file|uxp-file):\/\/\/?/,''));const _0x15ff58=_0x25b400[_0x450597(0xf4)](/[\\\/]/)[_0x450597(0xf6)](),_0x484b8a=await fs[_0x450597(0x109)](),_0x16985a=await _0x484b8a[_0x450597(0xf5)](_0x15ff58);if(_0x16985a)await _0x16985a[_0x450597(0x13c)]();return{'success':!![]};}catch(_0x27e72d){return{'success':![],'error':_0x27e72d[_0x450597(0x152)]};}}async function readBinaryFile(_0x8c8c08){const _0x37ce95=a0_0x1318b1;try{if(!_0x8c8c08)return{'success':![],'error':_0x37ce95(0xdd)};let _0x51223f;try{if(_0x8c8c08[_0x37ce95(0x14f)]('file:')||_0x8c8c08['startsWith']('uxp-file:'))_0x51223f=await fs[_0x37ce95(0x151)](_0x8c8c08);}catch(_0x198b09){}if(!_0x51223f){let _0x3458d2=decodeURIComponent(_0x8c8c08['replace'](/^(file|uxp-file):\/\/\/?/,''));const _0x1c7cb3=_0x3458d2['split'](/[\\\/]/)[_0x37ce95(0xf6)](),_0x9b4436=await fs[_0x37ce95(0x109)]();_0x51223f=await _0x9b4436[_0x37ce95(0xf5)](_0x1c7cb3);}if(!_0x51223f)throw new Error(_0x37ce95(0xe5)+_0x8c8c08);const _0x855890=await _0x51223f[_0x37ce95(0x122)]({'format':formats[_0x37ce95(0x14b)]});return{'success':!![],'buffer':Array[_0x37ce95(0x150)](new Uint8Array(_0x855890))};}catch(_0x137429){return{'success':![],'error':_0x137429[_0x37ce95(0x152)]};}}async function getActiveDocumentImage(_0x53d3fe={}){const _0x23cbd6=a0_0x1318b1,{baseMode:baseMode=_0x23cbd6(0x10e),namePrefix:namePrefix='',nodeId:nodeId='node',appId:appId=_0x23cbd6(0x153)}=_0x53d3fe;if(!app[_0x23cbd6(0xff)])return{'success':![],'error':_0x23cbd6(0x111)};if(!imaging||!imaging[_0x23cbd6(0xf7)])return{'success':![],'error':_0x23cbd6(0x135)};isProcessing=!![];try{const _0x286035=app[_0x23cbd6(0xff)];let _0xceb88b=null,_0x343a23=null,_0x3b2b83=null,_0x566943=null;try{_0x566943=await getSelectionInfo();}catch(_0x4200a5){}const _0x286836=parseInt(val(_0x286035[_0x23cbd6(0x105)]))||0x0,_0x2033d5=parseInt(val(_0x286035[_0x23cbd6(0x11a)]))||0x0;let _0x59b5b9=_0x286836,_0x321aa9=_0x2033d5,_0x38f229=0x0,_0x2dc50f=0x0;_0x53d3fe[_0x23cbd6(0x148)]&&_0x566943&&(_0x38f229=Math[_0x23cbd6(0x128)](val(_0x566943[_0x23cbd6(0x154)])),_0x2dc50f=Math[_0x23cbd6(0x128)](val(_0x566943[_0x23cbd6(0xf9)])),_0x59b5b9=Math[_0x23cbd6(0x128)](val(_0x566943['right']))-_0x38f229,_0x321aa9=Math[_0x23cbd6(0x128)](val(_0x566943['bottom']))-_0x2dc50f);let _0xd7d394=null,_0x4177e5=null;return await executeAsModal(async _0x2e3768=>{const _0x1a3052=_0x23cbd6;_0xd7d394=new Uint8Array(_0x59b5b9*_0x321aa9*0x4);for(let _0x39d8b5=0x3;_0x39d8b5<_0xd7d394[_0x1a3052(0x11f)];_0x39d8b5+=0x4)_0xd7d394[_0x39d8b5]=0x0;if(baseMode===_0x1a3052(0x10e)){const _0x4d8dd=await fetchPixels(_0x286035,{'targetSize':{'width':_0x286836,'height':_0x2033d5}});for(let _0x584003=0x0;_0x584003<_0x321aa9;_0x584003++){const _0x4da1e4=_0x2dc50f+_0x584003;if(_0x4da1e4<0x0||_0x4da1e4>=_0x2033d5)continue;for(let _0x49e90e=0x0;_0x49e90e<_0x59b5b9;_0x49e90e++){const _0x5f446b=_0x38f229+_0x49e90e;if(_0x5f446b<0x0||_0x5f446b>=_0x286836)continue;const _0x55d9bf=(_0x4da1e4*_0x286836+_0x5f446b)*_0x4d8dd['cC'],_0x5924c0=(_0x584003*_0x59b5b9+_0x49e90e)*0x4;_0xd7d394[_0x5924c0]=_0x4d8dd[_0x1a3052(0x12b)][_0x55d9bf],_0xd7d394[_0x5924c0+0x1]=_0x4d8dd[_0x1a3052(0x12b)][_0x55d9bf+0x1],_0xd7d394[_0x5924c0+0x2]=_0x4d8dd[_0x1a3052(0x12b)][_0x55d9bf+0x2],_0xd7d394[_0x5924c0+0x3]=_0x4d8dd['cC']===0x4?_0x4d8dd[_0x1a3052(0x12b)][_0x55d9bf+0x3]:0xff;}}_0x4d8dd[_0x1a3052(0x101)]();}else{const _0x55b37e=_0x286035[_0x1a3052(0x112)][0x0];if(!_0x55b37e)throw new Error(_0x1a3052(0x130));const _0x3c259c=_0x55b37e[_0x1a3052(0x118)],_0x16a79b=Math['round'](val(_0x3c259c[_0x1a3052(0xf9)])),_0x47a187=Math[_0x1a3052(0x128)](val(_0x3c259c[_0x1a3052(0x154)])),_0x29596c=await fetchPixels(_0x286035,{'layerID':_0x55b37e['id'],'applyAlpha':![]});for(let _0x30027a=0x0;_0x30027a<_0x321aa9;_0x30027a++){const _0x5aea50=_0x2dc50f+_0x30027a,_0x66327f=_0x5aea50-_0x16a79b;if(_0x66327f<0x0||_0x66327f>=_0x29596c['h'])continue;for(let _0x284164=0x0;_0x284164<_0x59b5b9;_0x284164++){const _0x10c112=_0x38f229+_0x284164,_0x5c7741=_0x10c112-_0x47a187;if(_0x5c7741<0x0||_0x5c7741>=_0x29596c['w'])continue;const _0x59541b=(_0x66327f*_0x29596c['w']+_0x5c7741)*_0x29596c['cC'],_0x33eccd=(_0x30027a*_0x59b5b9+_0x284164)*0x4,_0x1141a3=_0x29596c['cC']===0x4?_0x29596c[_0x1a3052(0x12b)][_0x59541b+0x3]:0xff;_0x1141a3>0x0&&(_0xd7d394[_0x33eccd]=_0x29596c[_0x1a3052(0x12b)][_0x59541b],_0xd7d394[_0x33eccd+0x1]=_0x29596c[_0x1a3052(0x12b)][_0x59541b+0x1],_0xd7d394[_0x33eccd+0x2]=_0x29596c[_0x1a3052(0x12b)][_0x59541b+0x2],_0xd7d394[_0x33eccd+0x3]=_0x1141a3);}}_0x29596c[_0x1a3052(0x101)]();}const _0x440941=appId?String(appId)[_0x1a3052(0x113)](/[^a-zA-Z0-9_-]/g,'_'):'app',_0x480b4d=nodeId?String(nodeId)[_0x1a3052(0x113)](/\.(image|mask|text)$/,'')[_0x1a3052(0x113)](/[^a-zA-Z0-9_-]/g,'_'):'node',_0x414527=''+(namePrefix?namePrefix+'_':'')+_0x440941+'_'+_0x480b4d;if(_0x566943){let _0x5036d2=null;try{const _0x56b4b7=await action[_0x1a3052(0xfd)]([{'_obj':_0x1a3052(0x141),'_target':[{'_ref':_0x1a3052(0x14a)}]}],{});_0x5036d2=_0x56b4b7[0x0]?.[_0x1a3052(0x12e)],await action['batchPlay']([{'_obj':_0x1a3052(0x13b),'mode':{'_enum':_0x1a3052(0x10c),'_value':_0x1a3052(0x121)},'using':{'_enum':_0x1a3052(0x11b),'_value':'white'}}],{});const _0x13d45a=await fetchPixels(_0x286035,{'layerID':_0x5036d2,'applyAlpha':![]}),_0x378240=await action[_0x1a3052(0xfd)]([{'_obj':'get','_target':[{'_ref':_0x1a3052(0x106),'_property':_0x1a3052(0x13e)},{'_ref':_0x1a3052(0x14a),'_id':_0x5036d2}],'_options':{'dialogOptions':_0x1a3052(0x119)}}],{'synchronousExecution':!![]}),_0x3a9a90=_0x378240[0x0][_0x1a3052(0x13e)],_0x115a71=Math[_0x1a3052(0x128)](val(_0x3a9a90[_0x1a3052(0xf9)])),_0x2e1134=Math[_0x1a3052(0x128)](val(_0x3a9a90[_0x1a3052(0x154)]));_0x4177e5=new Uint8Array(_0x59b5b9*_0x321aa9*0x4);for(let _0x4b3965=0x3;_0x4b3965<_0x4177e5[_0x1a3052(0x11f)];_0x4b3965+=0x4)_0x4177e5[_0x4b3965]=0x0;for(let _0x49d1b8=0x0;_0x49d1b8<_0x13d45a['h'];_0x49d1b8++){const _0x48e14=_0x115a71+_0x49d1b8,_0x45cea7=_0x48e14-_0x2dc50f;if(_0x45cea7<0x0||_0x45cea7>=_0x321aa9)continue;for(let _0x51f7c0=0x0;_0x51f7c0<_0x13d45a['w'];_0x51f7c0++){const _0x3dfcaa=_0x2e1134+_0x51f7c0,_0x503678=_0x3dfcaa-_0x38f229;if(_0x503678<0x0||_0x503678>=_0x59b5b9)continue;const _0x1a2ca7=(_0x49d1b8*_0x13d45a['w']+_0x51f7c0)*_0x13d45a['cC'],_0x1c2e98=(_0x45cea7*_0x59b5b9+_0x503678)*0x4,_0x505865=_0x13d45a['cC']===0x4?_0x13d45a[_0x1a3052(0x12b)][_0x1a2ca7+0x3]:_0x13d45a['data'][_0x1a2ca7];_0x505865>0x20&&(_0x4177e5[_0x1c2e98]=0xff,_0x4177e5[_0x1c2e98+0x1]=0x0,_0x4177e5[_0x1c2e98+0x2]=0x0,_0x4177e5[_0x1c2e98+0x3]=_0x505865);}}if(!_0x53d3fe[_0x1a3052(0x148)]){const _0x2735bc=new PngEncoder(_0x59b5b9,_0x321aa9,0x4);_0x343a23=await saveBufferToTemp(_0x2735bc['encode'](_0x4177e5),_0x414527+_0x1a3052(0x13a));}_0x13d45a[_0x1a3052(0x101)]();}catch(_0x25365c){throw _0x25365c;}finally{if(_0x5036d2)try{await action[_0x1a3052(0xfd)]([{'_obj':_0x1a3052(0x13c),'_target':[{'_ref':'layer','_id':_0x5036d2}]}],{});}catch(_0x1a36ad){}}}const _0x7ebb80=new PngEncoder(_0x59b5b9,_0x321aa9,0x4);_0xceb88b=await saveBufferToTemp(_0x7ebb80[_0x1a3052(0x134)](_0xd7d394),_0x414527+_0x1a3052(0xdf));if(_0xd7d394){const _0xfbe069=new Uint8Array(_0x59b5b9*_0x321aa9*0x4);for(let _0x1b0d05=0x0;_0x1b0d05<_0xfbe069['length'];_0x1b0d05+=0x4){_0xfbe069[_0x1b0d05]=_0xd7d394[_0x1b0d05],_0xfbe069[_0x1b0d05+0x1]=_0xd7d394[_0x1b0d05+0x1],_0xfbe069[_0x1b0d05+0x2]=_0xd7d394[_0x1b0d05+0x2],_0xfbe069[_0x1b0d05+0x3]=_0x4177e5?Math[_0x1a3052(0xe0)](0x0,_0xd7d394[_0x1b0d05+0x3]-_0x4177e5[_0x1b0d05+0x3]):_0xd7d394[_0x1b0d05+0x3];}const _0x472e40=new PngEncoder(_0x59b5b9,_0x321aa9,0x4);_0x3b2b83=await saveBufferToTemp(_0x472e40[_0x1a3052(0x134)](_0xfbe069),_0x414527+'_rgba.png');}},{'commandName':_0x23cbd6(0xed)}),{'success':!![],'image':_0xceb88b?_0x23cbd6(0xfe)+_0xceb88b:null,'mask':_0x343a23?'file://'+_0x343a23:null,'rgba':_0x3b2b83?_0x23cbd6(0xfe)+_0x3b2b83:null,'width':_0x59b5b9,'height':_0x321aa9,'isLocal':!![]};}catch(_0x537c5a){return{'success':![],'error':_0x23cbd6(0x131)+_0x537c5a['message']};}finally{isProcessing=![];}}async function pickLocalFile(){const _0x3a84b8=a0_0x1318b1;try{const _0x1cc3d0=await fs[_0x3a84b8(0xe9)]({'types':['png',_0x3a84b8(0xe7),_0x3a84b8(0x100),_0x3a84b8(0x133)],'allowMultiple':![]});if(!_0x1cc3d0)return{'success':![],'error':'User\x20cancelled'};const _0x427806=await fs[_0x3a84b8(0x109)](),_0x237109=await _0x1cc3d0[_0x3a84b8(0x116)](_0x427806,{'newName':_0x1cc3d0[_0x3a84b8(0x140)],'overwrite':!![]});return{'success':!![],'image':_0x237109[_0x3a84b8(0x104)],'name':_0x1cc3d0['name'],'isLocal':!![]};}catch(_0x40a055){return{'success':![],'error':_0x40a055[_0x3a84b8(0x152)]};}}async function pickFolder(){const _0xb2c49c=a0_0x1318b1;try{const _0x511dd2=await fs[_0xb2c49c(0xda)]();if(!_0x511dd2)return{'success':![],'error':'User\x20cancelled'};const _0x1da7b6=await fs['createSessionToken'](_0x511dd2);return{'success':!![],'path':_0x511dd2['nativePath'],'token':_0x1da7b6};}catch(_0x32f282){return{'success':![],'error':_0x32f282[_0xb2c49c(0x152)]};}}function a0_0x24b8(){const _0x1e2ed2=['nJG0mdLnuez3sfq','z2v0rMLSzuzVCK9Wzw5PBMC','twLZC2LUzYb0B2TLBIbVCIbMAwXLtMfTzq','D3jPDgu','zgXF','u0rloIbpChrPBwL6zwqGq2fWDhvYzq','lNbUzW','z2v0rw50CNLgB3jtzxnZAw9Uvg9Rzw4','z2v0rw50CMLLCW','zxHLy3v0zufZtw9KywW','CgL4zwXZvw5PDa','mJqXnLz6rKffza','C3bSAxq','z2v0rw50CNK','Cg9W','z2v0ugL4zwXZ','CMvZzxq','Dg9W','BNvTyMvY','mZmWmJa0n1nWENPhyq','x3zHBhvL','yMf0y2HqBgf5','zMLSztOVlW','ywn0AxzLrg9JDw1LBNq','ANbLzW','zgLZCg9Zzq','nK5kBgHPDa','CgLJA18','BMf0AxzLugf0Aa','D2LKDgG','ChjVCgvYDhK','C2HVDW','Bg9JywW','z2v0vgvTCg9Yyxj5rM9SzgvY','yNL0zuXLBMD0Aa','BM93','Aw50zxjWB2XHDgLVBG','B2jQzwn0','y2fUDMfZ','uuntqxzLCMfNzq','DhjHBNnMB3jT','tM8Gywn0AxzLigrVy3vTzw50','ywn0AxzLtgf5zxjZ','CMvWBgfJzq','CgvYy2vUDfvUAxq','tM8GDg9Rzw4','y29WEvrV','Aw5JBhvKzxm','yM91BMrZtM9fzMzLy3rZ','zg9UDerPC3bSyxK','AgvPz2H0','zMLSBenVBNrLBNrZ','zM9YBwf0CW','C2rRx3rLBxbFBgf5zxiUCg5N','CMLNAhq','BgvUz3rO','zg9JDw1LBNq','BM9YBwfS','CMvHza','tMvLzcbHDxrOB3jPEMf0Aw9UlIbqBgvHC2uGDxnLicjcCM93C2uIihrVihnLBgvJDcb0AgLZigzVBgrLCI4','ywrKtM90AwzPy2f0Aw9UtgLZDgvUzxi','mJm0mtyYm0nlBu1Rra','Bw92zq','C3rVCMfNzq','CM91BMq','C2HVD0fSzxj0','yM90Dg9T','zgf0yq','AxngB2XKzxi','mJu4mZG4D3DrDMzP','Bgf5zxjjra','DgfYz2v0u2L6zq','tM8Gywn0AxzLigXHEwvY','rxHLy3v0Aw9UigvYCM9YoIa','mta0nJyWm2vgDw5kvW','D2vICa','zw5JB2rL','ugHVDg9ZAg9WieLTywDPBMCGqvbjig5VDcbHDMfPBgfIBgu','Bg9JywXgAwXLu3LZDgvT','zMLSDgvY','yNvMzMvY','DMfSDwu','x21HC2SUCg5N','zMLSBa','zgvSzxrL','Aw1Hz2veyxrH','yM91BMrZ','lI91DgLSCY9qtKCTu0rllMPZ','BMfTzq','BwfRzq','yxjYyxLcDwzMzxi','mtu1mJiWmNnSuezvAW','mZq1mdyYmeLHyvzjwq','AxngAwXL','CgHVDg9ZAg9Wqvbj','DgfYz2v0rw51Bq','y3jVCa','rMLSzsbUB3qGzM91BMq','Bgf5zxi','yMLUyxj5','B3bLBG','y3jLyxrLrMLSzq','ugvYBwLZC2LVBIbKzw5PzwqGB3iGzM9SzgvYig5VDcbMB3vUzc4GugXLyxnLihvZzsbcCM93C2uGyNv0Dg9UihrVigf1DgHVCML6zsb0AgLZigzVBgrLCI4','C3rHCNrZv2L0Aa','zNjVBq','z2v0rw50CNLxAxrOvxjS','BwvZC2fNzq','yxbW','BgvMDa','CgHVDg9ZAg9W','z2v0rM9SzgvY','B3jKAw5HBa','z2v0','rw1WDhKGCgf0Aa','u0rloIbqBgfJzsbHBMqGqwrHChrPDMuGrML0','x2LTywDLlNbUzW','Bwf4','DxHW','u0rloIbpCgvUierVyW','CgXHy2vfDMvUDa','C2vSzwn0Aw9U','q291BgqGBM90igXVy2f0zsbMAwXLievUDhj5igzVCIbWyxrOoIa','Bw9Krgf0zq','ANbN'];a0_0x24b8=function(){return _0x1e2ed2;};return a0_0x24b8();}async function getFolderTokenFromPath(_0x22ddde){const _0x5546af=a0_0x1318b1;try{if(!_0x22ddde)return{'success':![],'error':_0x5546af(0xdd)};let _0xec04a0=await fs[_0x5546af(0x151)](_0x5546af(0xfe)+_0x22ddde);if(!_0xec04a0||!_0xec04a0[_0x5546af(0x12c)])return{'success':![],'error':_0x5546af(0x14e)};const _0x43c2d3=await fs['createSessionToken'](_0xec04a0);return{'success':!![],'path':_0xec04a0[_0x5546af(0x104)],'token':_0x43c2d3};}catch(_0x9667e0){return{'success':![],'error':_0x5546af(0x123)};}}async function listFiles(_0x29b720){const _0x72ab5f=a0_0x1318b1;try{if(!_0x29b720)return{'success':![],'error':_0x72ab5f(0x115)};const _0x21bf85=await fs[_0x72ab5f(0xef)](_0x29b720);if(!_0x21bf85||!_0x21bf85[_0x72ab5f(0x12c)])return{'success':![],'error':'Invalid\x20folder\x20token'};const _0x4152dd=await _0x21bf85['getEntries'](),_0x125fe0=_0x4152dd['filter'](_0x1e4589=>_0x1e4589[_0x72ab5f(0x145)]&&/\.(png|jpg|jpeg|webp)$/i['test'](_0x1e4589[_0x72ab5f(0x140)]))['map'](_0x4e0f30=>({'name':_0x4e0f30[_0x72ab5f(0x140)],'nativePath':_0x4e0f30[_0x72ab5f(0x104)]}));return{'success':!![],'files':_0x125fe0};}catch(_0x3978ce){return{'success':![],'error':_0x3978ce[_0x72ab5f(0x152)]};}}async function loadFileByPath(_0x2a6276,_0x1554f5){const _0x6b7950=a0_0x1318b1;try{if(!_0x2a6276||!_0x1554f5)return{'success':![],'error':_0x6b7950(0xea)};const _0x2ca13e=await fs[_0x6b7950(0xef)](_0x2a6276),_0x201cad=await _0x2ca13e[_0x6b7950(0xf5)](_0x1554f5);if(!_0x201cad||!_0x201cad['isFile'])return{'success':![],'error':_0x6b7950(0x149)};const _0x3c8e1a=await fs['getTemporaryFolder'](),_0x69730d=await _0x201cad['copyTo'](_0x3c8e1a,{'newName':_0x6b7950(0x103)+Date[_0x6b7950(0x10b)]()+'_'+_0x1554f5,'overwrite':!![]});return{'success':!![],'image':_0x69730d[_0x6b7950(0x104)],'name':_0x1554f5,'isLocal':!![]};}catch(_0x1bee49){return{'success':![],'error':_0x1bee49[_0x6b7950(0x152)]};}}async function downloadUrlToTemp(_0x55fd23,_0x2d8118){const _0x513f1c=a0_0x1318b1;if(!_0x2d8118)_0x2d8118=_0x513f1c(0xec)+Date[_0x513f1c(0x10b)]()+_0x513f1c(0xee);const _0x3af78e=await fetch(_0x55fd23),_0xc6e092=await _0x3af78e[_0x513f1c(0x142)](),_0x148d55=await fs[_0x513f1c(0x109)](),_0x2b58dc=await _0x148d55[_0x513f1c(0x14d)](_0x2d8118,{'overwrite':!![]});return await _0x2b58dc[_0x513f1c(0xeb)](_0xc6e092,{'format':formats['binary']}),{'success':!![],'nativePath':_0x2b58dc[_0x513f1c(0x104)]};}async function createDocFromUrl(_0x3bb56f){const _0x4f6da1=a0_0x1318b1;try{let _0x42b5f4;if(_0x3bb56f[_0x4f6da1(0x14f)](_0x4f6da1(0xfe)))_0x42b5f4=await fs['getEntryWithUrl'](_0x3bb56f);else{const _0x3e9345=await downloadUrlToTemp(_0x3bb56f,'sdk_temp_doc.png');_0x42b5f4=await fs['getEntryWithUrl']('file://'+_0x3e9345['nativePath']);}return await executeAsModal(async()=>{const _0x197c47=_0x4f6da1;await app[_0x197c47(0x14c)](_0x42b5f4);},{'commandName':_0x4f6da1(0xe2)}),{'success':!![]};}catch(_0x3d9eeb){return{'success':![],'error':_0x3d9eeb['message']};}}async function placeImageFromUrl(_0x1b3c2d,_0x325937=![]){const _0xac8ef8=a0_0x1318b1;try{let _0x4d75a8;if(_0x1b3c2d[_0xac8ef8(0x14f)]('file://'))_0x4d75a8=await fs['getEntryWithUrl'](_0x1b3c2d);else{const _0x774b08=await downloadUrlToTemp(_0x1b3c2d,_0xac8ef8(0x11d));_0x4d75a8=await fs[_0xac8ef8(0x151)](_0xac8ef8(0xfe)+_0x774b08[_0xac8ef8(0x104)]);}return await executeAsModal(async()=>{const _0x1c8475=_0xac8ef8,_0x4d9665=app[_0x1c8475(0xff)],_0x12e3b5=Number(val(_0x4d9665[_0x1c8475(0x105)])),_0xfd7d86=Number(val(_0x4d9665[_0x1c8475(0x11a)]));let _0x488a18={'left':0x0,'top':0x0,'right':_0x12e3b5,'bottom':_0xfd7d86};const _0x5369a9=await getSelectionInfo();if(_0x5369a9){const _0x2adcc5=Number(val(_0x5369a9[_0x1c8475(0x154)])),_0x56ef65=Number(val(_0x5369a9[_0x1c8475(0xf9)])),_0x3fb440=Number(val(_0x5369a9[_0x1c8475(0x11e)])),_0x19bd8e=Number(val(_0x5369a9[_0x1c8475(0x12a)]));_0x3fb440-_0x2adcc5>0x1&&_0x19bd8e-_0x56ef65>0x1&&(_0x488a18={'left':_0x2adcc5,'top':_0x56ef65,'right':_0x3fb440,'bottom':_0x19bd8e});}const _0x49f763=await fs['createSessionToken'](_0x4d75a8);await batchPlay([{'_obj':_0x1c8475(0xe3),'target':{'_path':_0x49f763,'_kind':_0x1c8475(0x108)},'linked':!![]}],{});const _0x3c4e2a=_0x4d9665[_0x1c8475(0x112)][0x0],_0x1e6796=_0x3c4e2a[_0x1c8475(0x118)],_0x54eac8=Number(val(_0x1e6796[_0x1c8475(0x154)])),_0x5b5596=Number(val(_0x1e6796['top'])),_0x47df5a=Number(val(_0x1e6796['right'])),_0x5396af=Number(val(_0x1e6796[_0x1c8475(0x12a)])),_0x20c77f=_0x47df5a-_0x54eac8,_0x51bcf5=_0x5396af-_0x5b5596,_0x5cf87d=(_0x54eac8+_0x47df5a)/0x2,_0x578b22=(_0x5b5596+_0x5396af)/0x2,_0x41fe19=_0x488a18[_0x1c8475(0x11e)]-_0x488a18['left'],_0x5eef00=_0x488a18[_0x1c8475(0x12a)]-_0x488a18['top'],_0x4fac20=(_0x488a18['left']+_0x488a18[_0x1c8475(0x11e)])/0x2,_0x5b4e60=(_0x488a18[_0x1c8475(0xf9)]+_0x488a18[_0x1c8475(0x12a)])/0x2;let _0x37e913=0x64,_0x44fda2=0x64,_0x1f375e=_0x4fac20,_0x1b714d=_0x5b4e60;_0x325937?(_0x1f375e=_0x12e3b5/0x2,_0x1b714d=_0xfd7d86/0x2,_0x37e913=0x64,_0x44fda2=0x64):(_0x37e913=_0x41fe19/_0x20c77f*0x64,_0x44fda2=_0x5eef00/_0x51bcf5*0x64);const _0x1dbe95=_0x1f375e-_0x5cf87d,_0x4fc9ee=_0x1b714d-_0x578b22;await action[_0x1c8475(0xfd)]([{'_obj':_0x1c8475(0x110),'_target':[{'_ref':_0x1c8475(0x14a),'_enum':'ordinal','_value':_0x1c8475(0x147)}],'freeTransformCenterState':{'_enum':'quadCenterState','_value':_0x1c8475(0x10f)},'offset':{'_obj':'offset','horizontal':{'_unit':_0x1c8475(0xf2),'_value':_0x1dbe95},'vertical':{'_unit':_0x1c8475(0xf2),'_value':_0x4fc9ee}},'width':{'_unit':_0x1c8475(0x114),'_value':_0x37e913},'height':{'_unit':'percentUnit','_value':_0x44fda2},'interpolation':{'_enum':'interpolationType','_value':'bicubic'}}],{}),await action[_0x1c8475(0xfd)]([{'_obj':'rasterizeLayer','_target':[{'_ref':_0x1c8475(0x14a),'_enum':_0x1c8475(0xdb),'_value':'targetEnum'}]}],{});},{'commandName':_0xac8ef8(0xde)}),{'success':!![]};}catch(_0x1c3057){return{'success':![],'error':_0x1c3057['message']};}}function getDocumentInfo(){const _0x5500ab=a0_0x1318b1;if(!app||!app[_0x5500ab(0xff)])return{'hasDocument':![]};const _0x20b74b=app[_0x5500ab(0xff)];return{'hasDocument':!![],'width':val(_0x20b74b[_0x5500ab(0x105)]),'height':val(_0x20b74b[_0x5500ab(0x11a)])};}function startSelectionListener(_0xf8c0d5){const _0x1bdd7e=a0_0x1318b1;if(!action||!action[_0x1bdd7e(0x124)])return;let _0xde03f2=null;action[_0x1bdd7e(0x124)](['all'],(_0x114a32,_0x5ecc19)=>{const _0x30ef95=_0x1bdd7e,_0x295268=['set',_0x30ef95(0xf8),'select','make',_0x30ef95(0x126),_0x30ef95(0x110),_0x30ef95(0x107),'hide',_0x30ef95(0x13c)];if(_0x295268[_0x30ef95(0x117)](_0x114a32)){if(_0xde03f2)clearTimeout(_0xde03f2);_0xde03f2=setTimeout(()=>{if(!isProcessing&&_0xf8c0d5)_0xf8c0d5();},0x258);}});}window[a0_0x1318b1(0x146)]={'getActiveDocumentImage':getActiveDocumentImage,'createDocFromUrl':createDocFromUrl,'placeImageFromUrl':placeImageFromUrl,'downloadUrlToTemp':downloadUrlToTemp,'getDocumentInfo':getDocumentInfo,'startSelectionListener':startSelectionListener,'deleteFile':deleteFile,'getTempFilesInfo':getTempFilesInfo,'pickLocalFile':pickLocalFile,'pickFolder':pickFolder,'getFolderTokenFromPath':getFolderTokenFromPath,'listFiles':listFiles,'loadFileByPath':loadFileByPath,'readBinaryFile':readBinaryFile,'showAlert':_0x9a5ab9=>app[a0_0x1318b1(0x129)](_0x9a5ab9)};
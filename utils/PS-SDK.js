function a0_0xb324(_0x36081c,_0x13fe2b){_0x36081c=_0x36081c-0x130;const _0x19f3f5=a0_0x19f3();let _0xb3241f=_0x19f3f5[_0x36081c];if(a0_0xb324['szCnkM']===undefined){var _0x14dfb9=function(_0xe8d382){const _0x465c06='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x254759='',_0x51a74a='';for(let _0x54b08d=0x0,_0x4959f0,_0x5f5023,_0x27f447=0x0;_0x5f5023=_0xe8d382['charAt'](_0x27f447++);~_0x5f5023&&(_0x4959f0=_0x54b08d%0x4?_0x4959f0*0x40+_0x5f5023:_0x5f5023,_0x54b08d++%0x4)?_0x254759+=String['fromCharCode'](0xff&_0x4959f0>>(-0x2*_0x54b08d&0x6)):0x0){_0x5f5023=_0x465c06['indexOf'](_0x5f5023);}for(let _0x24c5dd=0x0,_0x32e7bf=_0x254759['length'];_0x24c5dd<_0x32e7bf;_0x24c5dd++){_0x51a74a+='%'+('00'+_0x254759['charCodeAt'](_0x24c5dd)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x51a74a);};a0_0xb324['CbjnXM']=_0x14dfb9,a0_0xb324['xrOWqd']={},a0_0xb324['szCnkM']=!![];}const _0x7886a0=_0x19f3f5[0x0],_0x54e6b1=_0x36081c+_0x7886a0,_0x2059a8=a0_0xb324['xrOWqd'][_0x54e6b1];return!_0x2059a8?(_0xb3241f=a0_0xb324['CbjnXM'](_0xb3241f),a0_0xb324['xrOWqd'][_0x54e6b1]=_0xb3241f):_0xb3241f=_0x2059a8,_0xb3241f;}const a0_0x2f89db=a0_0xb324;(function(_0x2330b2,_0x3149b2){const _0x246df9=a0_0xb324,_0x4e531f=_0x2330b2();while(!![]){try{const _0x204103=-parseInt(_0x246df9(0x19c))/0x1+parseInt(_0x246df9(0x189))/0x2+-parseInt(_0x246df9(0x15f))/0x3+-parseInt(_0x246df9(0x18f))/0x4*(-parseInt(_0x246df9(0x163))/0x5)+parseInt(_0x246df9(0x16b))/0x6+-parseInt(_0x246df9(0x139))/0x7*(-parseInt(_0x246df9(0x13b))/0x8)+-parseInt(_0x246df9(0x135))/0x9;if(_0x204103===_0x3149b2)break;else _0x4e531f['push'](_0x4e531f['shift']());}catch(_0x3d35ea){_0x4e531f['push'](_0x4e531f['shift']());}}}(a0_0x19f3,0xccf6e));const {app,action,core,imaging}=require(a0_0x2f89db(0x1a0)),{batchPlay}=action,fs=require('uxp')[a0_0x2f89db(0x19d)][a0_0x2f89db(0x186)],formats=require(a0_0x2f89db(0x198))[a0_0x2f89db(0x19d)]['formats'],executeAsModal=core[a0_0x2f89db(0x162)],PngEncoder=require(a0_0x2f89db(0x161));let isProcessing=![];const val=_0x254759=>{const _0xb02fa1=a0_0x2f89db;if(_0x254759===null||_0x254759===undefined)return 0x0;if(typeof _0x254759===_0xb02fa1(0x14b))return _0x254759;if(typeof _0x254759===_0xb02fa1(0x168)){if(typeof _0x254759[_0xb02fa1(0x17a)]==='number')return _0x254759[_0xb02fa1(0x17a)];if(_0x254759['_value']!==undefined)return _0x254759[_0xb02fa1(0x15c)];for(let _0x54b08d in _0x254759){if(typeof _0x254759[_0x54b08d]==='object'){const _0x4959f0=val(_0x254759[_0x54b08d]);if(typeof _0x4959f0===_0xb02fa1(0x14b))return _0x4959f0;}}}const _0x51a74a=parseFloat(_0x254759);return isNaN(_0x51a74a)?0x0:_0x51a74a;},cleanFileUrl=_0x5f5023=>{const _0x3d4fdd=a0_0x2f89db;if(!_0x5f5023)return _0x5f5023;let _0x27f447=_0x5f5023[_0x3d4fdd(0x13f)]('?')[0x0]['split']('#')[0x0];if(_0x27f447[_0x3d4fdd(0x167)]('file:///'))try{const _0x24c5dd=/file:\/\/\/[a-zA-Z]:/[_0x3d4fdd(0x1a7)](_0x27f447);if(_0x24c5dd)return decodeURI(_0x27f447);}catch(_0x32e7bf){}return _0x27f447;};async function getSelectionInfo(){const _0x6ebc9b=a0_0x2f89db;try{const _0x28948b=require(_0x6ebc9b(0x1a0))[_0x6ebc9b(0x160)]['activeDocument'];if(_0x28948b&&_0x28948b[_0x6ebc9b(0x1ae)]){const _0x470085=_0x28948b['selection'][_0x6ebc9b(0x177)];if(_0x470085&&val(_0x470085['right'])-val(_0x470085[_0x6ebc9b(0x169)])>0x0)return _0x470085;}}catch(_0x29e61e){}try{const _0x54f0b7=await action[_0x6ebc9b(0x18a)]([{'_obj':_0x6ebc9b(0x133),'_target':[{'_ref':_0x6ebc9b(0x193),'_property':_0x6ebc9b(0x1ae)},{'_ref':_0x6ebc9b(0x134),'_enum':_0x6ebc9b(0x18e),'_value':_0x6ebc9b(0x138)}]}],{'synchronousExecution':!![]});if(_0x54f0b7&&_0x54f0b7[0x0]&&_0x54f0b7[0x0][_0x6ebc9b(0x1ae)]){const _0x55d483=_0x54f0b7[0x0][_0x6ebc9b(0x1ae)];return _0x55d483;}}catch(_0x2d3f79){}return null;}async function fetchPixels(_0x4c15b8,{layerID:_0x520c64,targetSize:_0xb0ecf2,applyAlpha:applyAlpha=!![]}={}){const _0x411d9a=a0_0x2f89db,_0x4ccd3c={'documentID':_0x4c15b8['id'],'applyAlpha':applyAlpha};if(_0x520c64)_0x4ccd3c[_0x411d9a(0x136)]=_0x520c64;if(_0xb0ecf2)_0x4ccd3c[_0x411d9a(0x159)]=_0xb0ecf2;const _0x184f3b=await imaging[_0x411d9a(0x1b3)](_0x4ccd3c),_0x4bdc8b=await _0x184f3b[_0x411d9a(0x18b)][_0x411d9a(0x13c)](),_0x381529=_0x4bdc8b&&_0x4bdc8b['buffer']?new Uint8Array(_0x4bdc8b[_0x411d9a(0x1b7)],_0x4bdc8b[_0x411d9a(0x1aa)],_0x4bdc8b[_0x411d9a(0x1af)]):_0x4bdc8b;return{'data':_0x381529,'w':_0x184f3b[_0x411d9a(0x18b)][_0x411d9a(0x197)],'h':_0x184f3b[_0x411d9a(0x18b)]['height'],'cC':_0x184f3b[_0x411d9a(0x18b)][_0x411d9a(0x130)],'dispose':()=>_0x184f3b[_0x411d9a(0x19e)]?.()};}async function saveBufferToTemp(_0x2c87d2,_0x1b62f5){const _0x270bbf=a0_0x2f89db;if(!_0x2c87d2||_0x2c87d2[_0x270bbf(0x1af)]===0x0||!_0x1b62f5)return null;try{const _0x1b5cd2=await fs[_0x270bbf(0x170)](),_0x313ef5=await _0x1b5cd2[_0x270bbf(0x14d)](_0x1b62f5,{'overwrite':!![]});return await _0x313ef5[_0x270bbf(0x156)](_0x2c87d2,{'format':formats[_0x270bbf(0x182)]}),_0x313ef5['nativePath'];}catch(_0x258fe3){return null;}}async function getTempFilesInfo(){const _0x19469c=a0_0x2f89db;try{const _0x488a59=await fs[_0x19469c(0x170)](),_0x158a9a=await _0x488a59['getEntries']();return{'success':!![],'files':_0x158a9a[_0x19469c(0x14a)](_0x5f11ac=>_0x5f11ac['isFile'])[_0x19469c(0x1a1)](_0xd6ef8c=>({'name':_0xd6ef8c[_0x19469c(0x1a6)],'nativePath':_0xd6ef8c[_0x19469c(0x196)],'modDate':_0xd6ef8c['modDate'],'url':'file://'+_0xd6ef8c[_0x19469c(0x196)]}))};}catch(_0x350602){return{'success':![],'error':_0x350602[_0x19469c(0x153)]};}}async function deleteFile(_0xc346eb){const _0x440ddd=a0_0x2f89db;try{if(!_0xc346eb)return{'success':![],'error':_0x440ddd(0x142)};let _0x1c111a=decodeURIComponent(_0xc346eb[_0x440ddd(0x141)](/^(file|uxp-file):\/\/\/?/,''));const _0x1aa0c7=_0x1c111a[_0x440ddd(0x13f)](/[\\\/]/)['pop'](),_0x3bd97f=await fs['getTemporaryFolder'](),_0x4a994d=await _0x3bd97f[_0x440ddd(0x149)](_0x1aa0c7);if(_0x4a994d)await _0x4a994d['delete']();return{'success':!![]};}catch(_0x41a575){return{'success':![],'error':_0x41a575['message']};}}async function readBinaryFile(_0x26d28f){const _0x3f2480=a0_0x2f89db;try{if(!_0x26d28f)return{'success':![],'error':_0x3f2480(0x142)};let _0x1af712;try{if(_0x26d28f[_0x3f2480(0x167)]('file:')||_0x26d28f[_0x3f2480(0x167)](_0x3f2480(0x1b1)))_0x1af712=await fs[_0x3f2480(0x175)](_0x26d28f);}catch(_0x163ac2){}if(!_0x1af712){let _0x3acded=decodeURIComponent(_0x26d28f['replace'](/^(file|uxp-file):\/\/\/?/,''));const _0x30622c=_0x3acded[_0x3f2480(0x13f)](/[\\\/]/)[_0x3f2480(0x178)](),_0xef589f=await fs[_0x3f2480(0x170)]();_0x1af712=await _0xef589f[_0x3f2480(0x149)](_0x30622c);}if(!_0x1af712)throw new Error(_0x3f2480(0x1a5)+_0x26d28f);const _0x1447bc=await _0x1af712[_0x3f2480(0x17d)]({'format':formats['binary']});return{'success':!![],'buffer':Array[_0x3f2480(0x146)](new Uint8Array(_0x1447bc))};}catch(_0x2a8982){return{'success':![],'error':_0x2a8982['message']};}}async function getActiveDocumentImage(_0x306dee={}){const _0x211f24=a0_0x2f89db,{baseMode:baseMode=_0x211f24(0x181),namePrefix:namePrefix='',nodeId:nodeId=_0x211f24(0x190),appId:appId=_0x211f24(0x160)}=_0x306dee;if(!app['activeDocument'])return{'success':![],'error':_0x211f24(0x147)};if(!imaging||!imaging[_0x211f24(0x1b3)])return{'success':![],'error':_0x211f24(0x176)};isProcessing=!![];try{const _0x16bc90=app[_0x211f24(0x17b)];let _0x34e7b5=null,_0x52245a=null,_0x55417a=null,_0x2910c3=null;try{_0x2910c3=await getSelectionInfo();}catch(_0x4d4c22){}const _0x129e8b=parseInt(val(_0x16bc90[_0x211f24(0x197)]))||0x0,_0x2d5b21=parseInt(val(_0x16bc90[_0x211f24(0x166)]))||0x0;let _0x29e2a4=_0x129e8b,_0x4cebde=_0x2d5b21,_0x1ec4fe=0x0,_0x873596=0x0;_0x306dee[_0x211f24(0x16d)]&&_0x2910c3&&(_0x1ec4fe=Math[_0x211f24(0x1b5)](val(_0x2910c3[_0x211f24(0x169)])),_0x873596=Math[_0x211f24(0x1b5)](val(_0x2910c3[_0x211f24(0x179)])),_0x29e2a4=Math['round'](val(_0x2910c3[_0x211f24(0x1b0)]))-_0x1ec4fe,_0x4cebde=Math['round'](val(_0x2910c3[_0x211f24(0x158)]))-_0x873596);let _0x11ce9d=null,_0x399491=null;return await executeAsModal(async _0x276c67=>{const _0x12c2a0=_0x211f24;_0x11ce9d=new Uint8Array(_0x29e2a4*_0x4cebde*0x4);for(let _0x372ce3=0x3;_0x372ce3<_0x11ce9d['length'];_0x372ce3+=0x4)_0x11ce9d[_0x372ce3]=0x0;if(baseMode===_0x12c2a0(0x181)){const _0x3f653f=await fetchPixels(_0x16bc90,{'targetSize':{'width':_0x129e8b,'height':_0x2d5b21}});for(let _0x364858=0x0;_0x364858<_0x4cebde;_0x364858++){const _0x4dadbb=_0x873596+_0x364858;if(_0x4dadbb<0x0||_0x4dadbb>=_0x2d5b21)continue;for(let _0x272d03=0x0;_0x272d03<_0x29e2a4;_0x272d03++){const _0x569326=_0x1ec4fe+_0x272d03;if(_0x569326<0x0||_0x569326>=_0x129e8b)continue;const _0x274b80=(_0x4dadbb*_0x129e8b+_0x569326)*_0x3f653f['cC'],_0x132bd1=(_0x364858*_0x29e2a4+_0x272d03)*0x4;_0x11ce9d[_0x132bd1]=_0x3f653f[_0x12c2a0(0x1b8)][_0x274b80],_0x11ce9d[_0x132bd1+0x1]=_0x3f653f['data'][_0x274b80+0x1],_0x11ce9d[_0x132bd1+0x2]=_0x3f653f['data'][_0x274b80+0x2],_0x11ce9d[_0x132bd1+0x3]=_0x3f653f['cC']===0x4?_0x3f653f[_0x12c2a0(0x1b8)][_0x274b80+0x3]:0xff;}}_0x3f653f[_0x12c2a0(0x19e)]();}else{const _0x37d598=_0x16bc90[_0x12c2a0(0x16f)][0x0];if(!_0x37d598)throw new Error('No\x20active\x20layer');const _0x18aeca=_0x37d598[_0x12c2a0(0x19b)],_0x5c0149=Math['round'](val(_0x18aeca[_0x12c2a0(0x179)])),_0x5bbf8c=Math[_0x12c2a0(0x1b5)](val(_0x18aeca[_0x12c2a0(0x169)])),_0x4b8c65=await fetchPixels(_0x16bc90,{'layerID':_0x37d598['id'],'applyAlpha':![]});for(let _0x4af3dc=0x0;_0x4af3dc<_0x4cebde;_0x4af3dc++){const _0x3486d8=_0x873596+_0x4af3dc,_0x244064=_0x3486d8-_0x5c0149;if(_0x244064<0x0||_0x244064>=_0x4b8c65['h'])continue;for(let _0x3c7890=0x0;_0x3c7890<_0x29e2a4;_0x3c7890++){const _0xad0889=_0x1ec4fe+_0x3c7890,_0x4297c8=_0xad0889-_0x5bbf8c;if(_0x4297c8<0x0||_0x4297c8>=_0x4b8c65['w'])continue;const _0x783acb=(_0x244064*_0x4b8c65['w']+_0x4297c8)*_0x4b8c65['cC'],_0xba1d8c=(_0x4af3dc*_0x29e2a4+_0x3c7890)*0x4,_0x474249=_0x4b8c65['cC']===0x4?_0x4b8c65[_0x12c2a0(0x1b8)][_0x783acb+0x3]:0xff;_0x474249>0x0&&(_0x11ce9d[_0xba1d8c]=_0x4b8c65[_0x12c2a0(0x1b8)][_0x783acb],_0x11ce9d[_0xba1d8c+0x1]=_0x4b8c65[_0x12c2a0(0x1b8)][_0x783acb+0x1],_0x11ce9d[_0xba1d8c+0x2]=_0x4b8c65['data'][_0x783acb+0x2],_0x11ce9d[_0xba1d8c+0x3]=_0x474249);}}_0x4b8c65[_0x12c2a0(0x19e)]();}const _0x14564f=appId?String(appId)['replace'](/[^a-zA-Z0-9_-]/g,'_'):_0x12c2a0(0x160),_0x48421a=nodeId?String(nodeId)[_0x12c2a0(0x141)](/\.(image|mask|text)$/,'')['replace'](/[^a-zA-Z0-9_-]/g,'_'):_0x12c2a0(0x190),_0x5a4163=''+(namePrefix?namePrefix+'_':'')+_0x14564f+'_'+_0x48421a;if(_0x2910c3){let _0x2c6bea=null;try{const _0x5122ce=await action['batchPlay']([{'_obj':_0x12c2a0(0x17c),'_target':[{'_ref':_0x12c2a0(0x1ac)}]}],{});_0x2c6bea=_0x5122ce[0x0]?.[_0x12c2a0(0x136)],await action[_0x12c2a0(0x18a)]([{'_obj':_0x12c2a0(0x165),'mode':{'_enum':_0x12c2a0(0x14f),'_value':_0x12c2a0(0x13e)},'using':{'_enum':'fillContents','_value':_0x12c2a0(0x171)}}],{});const _0x20716e=await fetchPixels(_0x16bc90,{'layerID':_0x2c6bea,'applyAlpha':![]}),_0x258ad5=await action[_0x12c2a0(0x18a)]([{'_obj':_0x12c2a0(0x133),'_target':[{'_ref':_0x12c2a0(0x193),'_property':'bounds'},{'_ref':_0x12c2a0(0x1ac),'_id':_0x2c6bea}],'_options':{'dialogOptions':_0x12c2a0(0x173)}}],{'synchronousExecution':!![]}),_0x771d37=_0x258ad5[0x0][_0x12c2a0(0x177)],_0x42635f=Math['round'](val(_0x771d37['top'])),_0x40f1f5=Math[_0x12c2a0(0x1b5)](val(_0x771d37[_0x12c2a0(0x169)]));_0x399491=new Uint8Array(_0x29e2a4*_0x4cebde*0x4);for(let _0x243b0f=0x3;_0x243b0f<_0x399491[_0x12c2a0(0x1a4)];_0x243b0f+=0x4)_0x399491[_0x243b0f]=0x0;for(let _0x479ed5=0x0;_0x479ed5<_0x20716e['h'];_0x479ed5++){const _0x4dbe9c=_0x42635f+_0x479ed5,_0x1aa98a=_0x4dbe9c-_0x873596;if(_0x1aa98a<0x0||_0x1aa98a>=_0x4cebde)continue;for(let _0x1b52a3=0x0;_0x1b52a3<_0x20716e['w'];_0x1b52a3++){const _0x4ca464=_0x40f1f5+_0x1b52a3,_0x9fc4ef=_0x4ca464-_0x1ec4fe;if(_0x9fc4ef<0x0||_0x9fc4ef>=_0x29e2a4)continue;const _0x1680fe=(_0x479ed5*_0x20716e['w']+_0x1b52a3)*_0x20716e['cC'],_0x5cd5b0=(_0x1aa98a*_0x29e2a4+_0x9fc4ef)*0x4,_0x1f61ed=_0x20716e['cC']===0x4?_0x20716e[_0x12c2a0(0x1b8)][_0x1680fe+0x3]:_0x20716e[_0x12c2a0(0x1b8)][_0x1680fe];_0x1f61ed>0x20&&(_0x399491[_0x5cd5b0]=0xff,_0x399491[_0x5cd5b0+0x1]=0x0,_0x399491[_0x5cd5b0+0x2]=0x0,_0x399491[_0x5cd5b0+0x3]=_0x1f61ed);}}if(!_0x306dee[_0x12c2a0(0x16d)]){const _0x4e17f0=new PngEncoder(_0x29e2a4,_0x4cebde,0x4);_0x52245a=await saveBufferToTemp(_0x4e17f0[_0x12c2a0(0x192)](_0x399491),_0x5a4163+_0x12c2a0(0x19a));}_0x20716e[_0x12c2a0(0x19e)]();}catch(_0xf538c8){throw _0xf538c8;}finally{if(_0x2c6bea)try{await action[_0x12c2a0(0x18a)]([{'_obj':_0x12c2a0(0x18d),'_target':[{'_ref':_0x12c2a0(0x1ac),'_id':_0x2c6bea}]}],{});}catch(_0x4a8ca7){}}}const _0x496759=new PngEncoder(_0x29e2a4,_0x4cebde,0x4);_0x34e7b5=await saveBufferToTemp(_0x496759['encode'](_0x11ce9d),_0x5a4163+'_image.png');if(_0x11ce9d){const _0xaed835=new Uint8Array(_0x29e2a4*_0x4cebde*0x4);for(let _0x1c11dd=0x0;_0x1c11dd<_0xaed835[_0x12c2a0(0x1a4)];_0x1c11dd+=0x4){_0xaed835[_0x1c11dd]=_0x11ce9d[_0x1c11dd],_0xaed835[_0x1c11dd+0x1]=_0x11ce9d[_0x1c11dd+0x1],_0xaed835[_0x1c11dd+0x2]=_0x11ce9d[_0x1c11dd+0x2],_0xaed835[_0x1c11dd+0x3]=_0x399491?Math['max'](0x0,_0x11ce9d[_0x1c11dd+0x3]-_0x399491[_0x1c11dd+0x3]):_0x11ce9d[_0x1c11dd+0x3];}const _0x59a599=new PngEncoder(_0x29e2a4,_0x4cebde,0x4);_0x55417a=await saveBufferToTemp(_0x59a599['encode'](_0xaed835),_0x5a4163+_0x12c2a0(0x195));}},{'commandName':_0x211f24(0x14e)}),{'success':!![],'image':_0x34e7b5?_0x211f24(0x17f)+_0x34e7b5:null,'mask':_0x52245a?_0x211f24(0x17f)+_0x52245a:null,'rgba':_0x55417a?_0x211f24(0x17f)+_0x55417a:null,'width':_0x29e2a4,'height':_0x4cebde,'isLocal':!![]};}catch(_0x8285d3){return{'success':![],'error':_0x211f24(0x14c)+_0x8285d3['message']};}finally{isProcessing=![];}}async function pickLocalFile(){const _0x510e65=a0_0x2f89db;try{const _0x2431fa=await fs[_0x510e65(0x191)]({'types':[_0x510e65(0x180),_0x510e65(0x1b2),_0x510e65(0x199),_0x510e65(0x143)],'allowMultiple':![]});if(!_0x2431fa)return{'success':![],'error':_0x510e65(0x15e)};const _0x5b6c62=await fs[_0x510e65(0x170)](),_0x1b3ba7=await _0x2431fa[_0x510e65(0x15b)](_0x5b6c62,{'newName':_0x2431fa[_0x510e65(0x1a6)],'overwrite':!![]});return{'success':!![],'image':_0x1b3ba7[_0x510e65(0x196)],'name':_0x2431fa[_0x510e65(0x1a6)],'isLocal':!![]};}catch(_0x4f45e3){return{'success':![],'error':_0x4f45e3[_0x510e65(0x153)]};}}async function pickFolder(){const _0x975061=a0_0x2f89db;try{const _0x13f8ce=await fs[_0x975061(0x137)]();if(!_0x13f8ce)return{'success':![],'error':_0x975061(0x15e)};const _0x2967c2=await fs[_0x975061(0x131)](_0x13f8ce);return{'success':!![],'path':_0x13f8ce[_0x975061(0x196)],'token':_0x2967c2};}catch(_0x3d1f3f){return{'success':![],'error':_0x3d1f3f[_0x975061(0x153)]};}}async function getFolderTokenFromPath(_0x5787fa){const _0x1896f2=a0_0x2f89db;try{if(!_0x5787fa)return{'success':![],'error':_0x1896f2(0x142)};let _0x104924=await fs['getEntryWithUrl'](_0x1896f2(0x17f)+_0x5787fa);if(!_0x104924||!_0x104924['isFolder'])return{'success':![],'error':_0x1896f2(0x15d)};const _0x244633=await fs['createSessionToken'](_0x104924);return{'success':!![],'path':_0x104924['nativePath'],'token':_0x244633};}catch(_0x55377c){return{'success':![],'error':_0x1896f2(0x157)};}}async function listFiles(_0x326f82){const _0x5b1744=a0_0x2f89db;try{if(!_0x326f82)return{'success':![],'error':_0x5b1744(0x188)};const _0x4e98b5=await fs[_0x5b1744(0x1a8)](_0x326f82);if(!_0x4e98b5||!_0x4e98b5[_0x5b1744(0x185)])return{'success':![],'error':_0x5b1744(0x155)};const _0x4867a6=await _0x4e98b5[_0x5b1744(0x150)](),_0x45627a=_0x4867a6[_0x5b1744(0x14a)](_0x34e744=>_0x34e744[_0x5b1744(0x154)]&&/\.(png|jpg|jpeg|webp)$/i['test'](_0x34e744[_0x5b1744(0x1a6)]))[_0x5b1744(0x1a1)](_0x5569ed=>({'name':_0x5569ed[_0x5b1744(0x1a6)],'nativePath':_0x5569ed['nativePath']}));return{'success':!![],'files':_0x45627a};}catch(_0x28602f){return{'success':![],'error':_0x28602f[_0x5b1744(0x153)]};}}async function loadFileByPath(_0x4d1847,_0x2c8298){const _0x37e5b8=a0_0x2f89db;try{if(!_0x4d1847||!_0x2c8298)return{'success':![],'error':'Missing\x20token\x20or\x20fileName'};const _0x5de5cd=await fs[_0x37e5b8(0x1a8)](_0x4d1847),_0x305616=await _0x5de5cd[_0x37e5b8(0x149)](_0x2c8298);if(!_0x305616||!_0x305616[_0x37e5b8(0x154)])return{'success':![],'error':_0x37e5b8(0x144)};const _0x129226=await fs[_0x37e5b8(0x170)](),_0x15045f=await _0x305616[_0x37e5b8(0x15b)](_0x129226,{'newName':'pick_'+Date['now']()+'_'+_0x2c8298,'overwrite':!![]});return{'success':!![],'image':_0x15045f[_0x37e5b8(0x196)],'name':_0x2c8298,'isLocal':!![]};}catch(_0x400e35){return{'success':![],'error':_0x400e35[_0x37e5b8(0x153)]};}}async function downloadUrlToTemp(_0x3d4941,_0x740acb){const _0x1be7d2=a0_0x2f89db;if(!_0x740acb)_0x740acb=_0x1be7d2(0x19f)+Date[_0x1be7d2(0x18c)]()+_0x1be7d2(0x1b4);const _0x321a1c=await fetch(_0x3d4941),_0xb19d5d=await _0x321a1c[_0x1be7d2(0x17e)](),_0x1b02a9=await fs['getTemporaryFolder'](),_0x393b89=await _0x1b02a9[_0x1be7d2(0x14d)](_0x740acb,{'overwrite':!![]});return await _0x393b89[_0x1be7d2(0x156)](_0xb19d5d,{'format':formats[_0x1be7d2(0x182)]}),{'success':!![],'nativePath':_0x393b89[_0x1be7d2(0x196)]};}async function createDocFromUrl(_0x577e51){const _0x39327d=a0_0x2f89db;try{let _0x53a7d0;const _0x325dd8=cleanFileUrl(_0x577e51);if(_0x325dd8[_0x39327d(0x167)](_0x39327d(0x15a)))try{_0x53a7d0=await fs['getEntryWithUrl'](_0x325dd8);}catch(_0x259cb4){try{const _0xdc3f91=_0x325dd8['replace']('file:///',_0x39327d(0x17f));_0x53a7d0=await fs[_0x39327d(0x175)](_0xdc3f91);}catch(_0x42f5f3){const _0x5a35db=decodeURIComponent(_0x325dd8['replace'](/^file:\/\/\/?/,'')),_0x3577ed=await fs[_0x39327d(0x170)](),_0x2a82ca=_0x5a35db[_0x39327d(0x13f)](/[\\\/]/)['pop']();_0x53a7d0=await _0x3577ed[_0x39327d(0x149)](_0x2a82ca);}}else{const _0x1dcd47=await downloadUrlToTemp(_0x325dd8,_0x39327d(0x13a));_0x53a7d0=await fs[_0x39327d(0x175)](_0x39327d(0x17f)+_0x1dcd47[_0x39327d(0x196)]);}if(!_0x53a7d0)throw new Error(_0x39327d(0x16e)+_0x577e51);return await executeAsModal(async()=>{await app['open'](_0x53a7d0);},{'commandName':_0x39327d(0x194)}),{'success':!![]};}catch(_0x9eec9d){return{'success':![],'error':_0x9eec9d[_0x39327d(0x153)]};}}async function placeImageFromUrl(_0x3d4a3f,_0x3a3d21=![]){const _0x239e85=a0_0x2f89db;try{let _0x233189;const _0x5dc006=cleanFileUrl(_0x3d4a3f);if(_0x5dc006[_0x239e85(0x167)](_0x239e85(0x15a)))try{_0x233189=await fs[_0x239e85(0x175)](_0x5dc006);}catch(_0x4baffa){try{const _0x2164bf=_0x5dc006['replace'](_0x239e85(0x16a),'file://');_0x233189=await fs[_0x239e85(0x175)](_0x2164bf);}catch(_0x578170){const _0x22a13c=decodeURIComponent(_0x5dc006[_0x239e85(0x141)](/^file:\/\/\/?/,'')),_0x20a97e=await fs[_0x239e85(0x170)](),_0x2f3d7a=_0x22a13c[_0x239e85(0x13f)](/[\\\/]/)[_0x239e85(0x178)]();_0x233189=await _0x20a97e['getEntry'](_0x2f3d7a);}}else{const _0x4355e1=await downloadUrlToTemp(_0x5dc006,_0x239e85(0x1a2));_0x233189=await fs[_0x239e85(0x175)]('file://'+_0x4355e1['nativePath']);}if(!_0x233189)throw new Error(_0x239e85(0x16e)+_0x3d4a3f);return await executeAsModal(async()=>{const _0x28b373=_0x239e85,_0x372ee1=app[_0x28b373(0x17b)],_0x5efadc=Number(val(_0x372ee1[_0x28b373(0x197)])),_0x277fe2=Number(val(_0x372ee1[_0x28b373(0x166)]));let _0x13dfde={'left':0x0,'top':0x0,'right':_0x5efadc,'bottom':_0x277fe2};const _0x595f3e=await getSelectionInfo();if(_0x595f3e){const _0x4899a4=Number(val(_0x595f3e[_0x28b373(0x169)])),_0x3b2fbd=Number(val(_0x595f3e[_0x28b373(0x179)])),_0xc3e34b=Number(val(_0x595f3e[_0x28b373(0x1b0)])),_0x2601f7=Number(val(_0x595f3e['bottom']));_0xc3e34b-_0x4899a4>0x1&&_0x2601f7-_0x3b2fbd>0x1&&(_0x13dfde={'left':_0x4899a4,'top':_0x3b2fbd,'right':_0xc3e34b,'bottom':_0x2601f7});}const _0x202ded=await fs['createSessionToken'](_0x233189);await batchPlay([{'_obj':_0x28b373(0x187),'target':{'_path':_0x202ded,'_kind':_0x28b373(0x1a3)},'linked':!![]}],{});const _0x49e454=_0x372ee1[_0x28b373(0x16f)][0x0],_0x6acbbb=_0x49e454['boundsNoEffects'],_0x3f29a1=Number(val(_0x6acbbb[_0x28b373(0x169)])),_0x5ac94b=Number(val(_0x6acbbb[_0x28b373(0x179)])),_0x180d82=Number(val(_0x6acbbb[_0x28b373(0x1b0)])),_0xb297d8=Number(val(_0x6acbbb[_0x28b373(0x158)])),_0x4bf3d7=_0x180d82-_0x3f29a1,_0x4c44a8=_0xb297d8-_0x5ac94b,_0xb64730=(_0x3f29a1+_0x180d82)/0x2,_0x340419=(_0x5ac94b+_0xb297d8)/0x2,_0x55a4e9=_0x13dfde[_0x28b373(0x1b0)]-_0x13dfde[_0x28b373(0x169)],_0x588cde=_0x13dfde[_0x28b373(0x158)]-_0x13dfde[_0x28b373(0x179)],_0x1e3aec=(_0x13dfde[_0x28b373(0x169)]+_0x13dfde[_0x28b373(0x1b0)])/0x2,_0x5ef19d=(_0x13dfde[_0x28b373(0x179)]+_0x13dfde['bottom'])/0x2;let _0x5f1114=0x64,_0x5dc6b5=0x64,_0x4e97d2=_0x1e3aec,_0x1ef7a9=_0x5ef19d;_0x3a3d21?(_0x4e97d2=_0x5efadc/0x2,_0x1ef7a9=_0x277fe2/0x2,_0x5f1114=0x64,_0x5dc6b5=0x64):(_0x5f1114=_0x55a4e9/_0x4bf3d7*0x64,_0x5dc6b5=_0x588cde/_0x4c44a8*0x64);const _0x22222c=_0x4e97d2-_0xb64730,_0x2d22d1=_0x1ef7a9-_0x340419;await action[_0x28b373(0x18a)]([{'_obj':'transform','_target':[{'_ref':_0x28b373(0x1ac),'_enum':_0x28b373(0x18e),'_value':_0x28b373(0x138)}],'freeTransformCenterState':{'_enum':_0x28b373(0x1ab),'_value':_0x28b373(0x1a9)},'offset':{'_obj':_0x28b373(0x132),'horizontal':{'_unit':_0x28b373(0x13d),'_value':_0x22222c},'vertical':{'_unit':_0x28b373(0x13d),'_value':_0x2d22d1}},'width':{'_unit':_0x28b373(0x164),'_value':_0x5f1114},'height':{'_unit':_0x28b373(0x164),'_value':_0x5dc6b5},'interpolation':{'_enum':_0x28b373(0x1b6),'_value':'bicubic'}}],{}),await action[_0x28b373(0x18a)]([{'_obj':_0x28b373(0x145),'_target':[{'_ref':'layer','_enum':_0x28b373(0x18e),'_value':_0x28b373(0x138)}]}],{});},{'commandName':_0x239e85(0x148)}),{'success':!![]};}catch(_0x7c5b20){return{'success':![],'error':_0x7c5b20[_0x239e85(0x153)]};}}function getDocumentInfo(){const _0x1f5970=a0_0x2f89db;if(!app||!app[_0x1f5970(0x17b)])return{'hasDocument':![]};const _0x4f6726=app['activeDocument'];return{'hasDocument':!![],'width':val(_0x4f6726[_0x1f5970(0x197)]),'height':val(_0x4f6726['height'])};}function startSelectionListener(_0x51356c){const _0x59b291=a0_0x2f89db;if(!action||!action['addNotificationListener'])return;let _0x1bf96b=null;action[_0x59b291(0x152)]([_0x59b291(0x183)],(_0x320dfb,_0x5a6644)=>{const _0x1ecb20=_0x59b291,_0x37c5a3=['set',_0x1ecb20(0x184),_0x1ecb20(0x172),_0x1ecb20(0x17c),_0x1ecb20(0x140),'transform','show',_0x1ecb20(0x151),_0x1ecb20(0x18d)];if(_0x37c5a3[_0x1ecb20(0x16c)](_0x320dfb)){if(_0x1bf96b)clearTimeout(_0x1bf96b);_0x1bf96b=setTimeout(()=>{if(!isProcessing&&_0x51356c)_0x51356c();},0x258);}});}function a0_0x19f3(){const _0x278fa3=['CM91BMq','Aw50zxjWB2XHDgLVBLr5Cgu','yNvMzMvY','zgf0yq','y29TCg9Uzw50CW','y3jLyxrLu2vZC2LVBLrVA2vU','B2zMC2v0','z2v0','zg9JDw1LBNq','mJm2mtG5mZrtvMDdsvC','Bgf5zxjjra','z2v0rM9SzgvY','DgfYz2v0rw51Bq','mteWmdeYAhzRr2j3','C2rRx3rLBxbFzg9JlNbUzW','ntKYC2ngyML5','z2v0rgf0yq','CgL4zwXZvw5PDa','BM9YBwfS','C3bSAxq','Bw92zq','CMvWBgfJzq','rw1WDhKGCgf0Aa','D2vICa','rMLSzsbUB3qGzM91BMq','CMfZDgvYAxPLtgf5zxi','zNjVBq','tM8Gywn0AxzLigrVy3vTzw50','u0rloIbqBgfJzsbHBMqGqwrHChrPDMuGrML0','z2v0rw50CNK','zMLSDgvY','BNvTyMvY','rxHLy3v0Aw9UigvYCM9YoIa','y3jLyxrLrMLSzq','u0rloIbpChrPBwL6zwqGq2fWDhvYzq','Aw50zxjWB2XHDgLVBG','z2v0rw50CMLLCW','AgLKzq','ywrKtM90AwzPy2f0Aw9UtgLZDgvUzxi','BwvZC2fNzq','AxngAwXL','sw52ywXPzcbMB2XKzxiGDg9Rzw4','D3jPDgu','tMvLzcbHDxrOB3jPEMf0Aw9UlIbqBgvHC2uGDxnLicjcCM93C2uIihrVihnLBgvJDcb0AgLZigzVBgrLCI4','yM90Dg9T','DgfYz2v0u2L6zq','zMLSztO','y29WEvrV','x3zHBhvL','ugvYBwLZC2LVBIbKzw5PzwqGB3iGzM9SzgvYig5VDcbMB3vUzc4GugXLyxnLihvZzsbcCM93C2uGyNv0Dg9UihrVigf1DgHVCML6zsb0AgLZigzVBgrLCI4','vxnLCIbJyw5JzwXSzwq','ndiYotiYr1vOEKnO','yxbW','lI91DgLSCY9qtKCTu0rllMPZ','zxHLy3v0zufZtw9KywW','mtbrwNbiyMK','CgvYy2vUDfvUAxq','zMLSBa','AgvPz2H0','C3rHCNrZv2L0Aa','B2jQzwn0','BgvMDa','zMLSztOVlY8','nZi1odeYmNv2z3v6CG','Aw5JBhvKzxm','y3jVCa','q291BgqGBM90igzPBMqGzw50CNKGzM9YoIa','ywn0AxzLtgf5zxjZ','z2v0vgvTCg9Yyxj5rM9SzgvY','D2HPDgu','C2vSzwn0','zg9UDerPC3bSyxK','CgHVDg9ZAg9Wqvbj','z2v0rw50CNLxAxrOvxjS','ugHVDg9ZAg9WieLTywDPBMCGqvbjig5VDcbHDMfPBgfIBgu','yM91BMrZ','Cg9W','Dg9W','DMfSDwu','ywn0AxzLrg9JDw1LBNq','BwfRzq','CMvHza','yxjYyxLcDwzMzxi','zMLSztOVlW','Cg5N','y2fUDMfZ','yMLUyxj5','ywXS','CMvZzxq','AxngB2XKzxi','Bg9JywXgAwXLu3LZDgvT','CgXHy2vfDMvUDa','tM8GDg9Rzw4','mZe3nJC2ognoEhflra','yMf0y2HqBgf5','Aw1Hz2veyxrH','BM93','zgvSzxrL','B3jKAw5HBa','mtG0nZa0nhf3tLfNyq','BM9Kzq','z2v0rMLSzuzVCK9Wzw5PBMC','zw5JB2rL','ChjVCgvYDhK','u0rloIbpCgvUierVyW','x3jNyMeUCg5N','BMf0AxzLugf0Aa','D2LKDgG','DxHW','ANbLzW','x21HC2SUCg5N','yM91BMrZtM9fzMzLy3rZ','mti3otC0m1P5B3bxAW','C3rVCMfNzq','zgLZCg9Zzq','zgXF','CgHVDg9ZAg9W','BwfW','C2rRx3rLBxbFBgf5zxiUCg5N','Bg9JywW','BgvUz3rO','q291BgqGBM90igXVy2f0zsbMAwXLievUDhj5igzVCIbWyxrOoIa','BMfTzq','DgvZDa','z2v0rw50CNLgB3jtzxnZAw9Uvg9Rzw4','uuntqxzLCMfNzq','yNL0zu9MzNnLDa','CxvHzenLBNrLCLn0yxrL','Bgf5zxi','C2HVD0fSzxj0','C2vSzwn0Aw9U','yNL0zuXLBMD0Aa','CMLNAhq','DxHWlwzPBgu6','ANbN','z2v0ugL4zwXZ','lNbUzW'];a0_0x19f3=function(){return _0x278fa3;};return a0_0x19f3();}window[a0_0x2f89db(0x174)]={'getActiveDocumentImage':getActiveDocumentImage,'createDocFromUrl':createDocFromUrl,'placeImageFromUrl':placeImageFromUrl,'downloadUrlToTemp':downloadUrlToTemp,'getDocumentInfo':getDocumentInfo,'startSelectionListener':startSelectionListener,'deleteFile':deleteFile,'getTempFilesInfo':getTempFilesInfo,'pickLocalFile':pickLocalFile,'pickFolder':pickFolder,'getFolderTokenFromPath':getFolderTokenFromPath,'listFiles':listFiles,'loadFileByPath':loadFileByPath,'readBinaryFile':readBinaryFile,'showAlert':_0x55cb10=>app[a0_0x2f89db(0x1ad)](_0x55cb10)};
const a0_0x33ab40=a0_0x1cf7;(function(_0x201ba7,_0x422e08){const _0x19033d=a0_0x1cf7,_0x1ddd45=_0x201ba7();while(!![]){try{const _0x4c6de5=parseInt(_0x19033d(0x257))/0x1+-parseInt(_0x19033d(0x1eb))/0x2+parseInt(_0x19033d(0x235))/0x3*(-parseInt(_0x19033d(0x1f6))/0x4)+-parseInt(_0x19033d(0x216))/0x5*(-parseInt(_0x19033d(0x26a))/0x6)+parseInt(_0x19033d(0x263))/0x7+-parseInt(_0x19033d(0x1f2))/0x8+-parseInt(_0x19033d(0x25f))/0x9*(-parseInt(_0x19033d(0x259))/0xa);if(_0x4c6de5===_0x422e08)break;else _0x1ddd45['push'](_0x1ddd45['shift']());}catch(_0x44aa74){_0x1ddd45['push'](_0x1ddd45['shift']());}}}(a0_0x4857,0x7e0b9));function a0_0x4857(){const _0x581d6c=['C2v0','yNvMzMvY','BM9Kzq','x2LTywDLlNbUzW','zg9UDerPC3bSyxK','Dg9W','AxngAwXL','Aw50zxjWB2XHDgLVBLr5Cgu','DgvZDa','zgf0yq','zM9YBwf0CW','BgvMDa','Bw92zq','zMLSBenVBNrLBNrZ','C3bSAxq','sw52ywXPzcbMB2XKzxiGDg9Rzw4','C2vSzwn0Aw9U','u0rloIbpCgvUierVyW','B2zMC2v0','DhjHBNnMB3jT','CgHVDg9ZAg9Wqvbj','rMLSzsbUB3qGzM91BMq','z2v0','BgvUz3rO','C2HVDW','y2fUDMfZ','tM8Gywn0AxzLigXHEwvY','AxngB2XKzxi','yM91BMrZ','zMLSztO','nteZode1vMLws2HA','yxbW','BMfTzq','Aw5JBhvKzxm','yM90Dg9T','CMfZDgvYAxPLtgf5zxi','DMfSDwu','zMLSBa','ywn0AxzLtgf5zxjZ','y3jVCa','ywn0AxzLrg9JDw1LBNq','C2rRx3rLBxbFBgf5zxiUCg5N','yNL0zu9MzNnLDa','yM91BMrZtM9fzMzLy3rZ','ANbN','y3jLyxrLu2vZC2LVBLrVA2vU','CMLNAhq','C2vSzwn0','y29TCg9Uzw50CW','B2jQzwn0','z2v0rw50CMLLCW','zw5JB2rL','z2v0ugL4zwXZ','Cg5N','BwfRzq','vxnLCIbJyw5JzwXSzwq','Bw9Krgf0zq','DgfYz2v0rw51Bq','Bg9JywW','yNL0zuXLBMD0Aa','CgLJA18','otK4odaYwLrJtxHe','zxHLy3v0zufZtw9KywW','tMvLzcbHDxrOB3jPEMf0Aw9UlIbqBgvHC2uGDxnLicjcCM93C2uIihrVihnLBgvJDcb0AgLZigzVBgrLCI4','CgHVDg9ZAg9W','Aw50zxjWB2XHDgLVBG','zgLZCg9Zzq','yMLUyxj5','CMvWBgfJzq','lNbUzW','DxHW','AgvPz2H0','x21HC2SUCg5N','x3zHBhvL','zMLSDgvY','D2LKDgG','BMf0AxzLugf0Aa','z2v0rw50CNLxAxrOvxjS','u0rloIbqBgfJzsbHBMqGqwrHChrPDMuGrML0','Bgf5zxi','zMLSztOVlW','ugvYBwLZC2LVBIbKzw5PzwqGB3iGzM9SzgvYig5VDcbMB3vUzc4GugXLyxnLihvZzsbcCM93C2uGyNv0Dg9UihrVigf1DgHVCML6zsb0AgLZigzVBgrLCI4','CxvHzenLBNrLCLn0yxrL','z2v0rM9SzgvY','DgfYz2v0u2L6zq','zgXF','x3jNyMeUCg5N','y29WEvrV','Bgf5zxjjra','D3jPDgu','Bwf4','ywXS','tM8Gywn0AxzLigrVy3vTzw50','CMvZzxq','Aw1Hz2veyxrH','mtK1mdmYq0zMqu1r','ChjVCgvYDhK','ndeZnZGYmeHKvufvCG','BM93','C2rRx3rLBxbFzg9JlNbUzW','lI91DgLSCY9qtKCTu0rllMPZ','z2v0rMLSzuzVCK9Wzw5PBMC','C3rVCMfNzq','ovLmBefAtG','CgXHy2vfDMvUDa','CMvHza','BwvZC2fNzq','ndCYnZyZoxbQthziBG','rxHLy3v0Aw9UigvYCM9YoIa','zg9JDw1LBNq','CM91BMq','z2v0vgvTCg9Yyxj5rM9SzgvY','B3jKAw5HBa','BwfW','ntrhzhrhBKi','B3bLBG','y3jLyxrLrMLSzq','C3rHCNrZv2L0Aa','CgL4zwXZvw5PDa','z2v0rw50CNK','z2v0rgf0yq','zgvSzxrL','mtiXntmYmMfTB0TKCG','yMLJDwjPyW','DxHWlwzPBgu6','ywrKtM90AwzPy2f0Aw9UtgLZDgvUzxi','rw1WDhKGCgf0Aa','u0rloIbpChrPBwL6zwqGq2fWDhvYzq','twLZC2LUzYb0B2TLBIbVCIbMAwXLtMfTzq','mZm1mZK4neLhtxvkAG','yMf0y2HqBgf5','CgvYy2vUDfvUAxq','BNvTyMvY','ogzJyLPHrq','AgLKzq'];a0_0x4857=function(){return _0x581d6c;};return a0_0x4857();}const {app,action,core,imaging}=require(a0_0x33ab40(0x238)),{batchPlay}=action,fs=require(a0_0x33ab40(0x23e))[a0_0x33ab40(0x25e)]['localFileSystem'],formats=require('uxp')[a0_0x33ab40(0x25e)][a0_0x33ab40(0x202)],executeAsModal=core[a0_0x33ab40(0x236)],PngEncoder=require(a0_0x33ab40(0x25c));let isProcessing=![];const val=_0x329922=>{const _0xb199c8=a0_0x33ab40;if(_0x329922===null||_0x329922===undefined)return 0x0;if(typeof _0x329922===_0xb199c8(0x1f5))return _0x329922;if(typeof _0x329922==='object'){if(typeof _0x329922[_0xb199c8(0x21c)]===_0xb199c8(0x1f5))return _0x329922['value'];if(_0x329922['_value']!==undefined)return _0x329922[_0xb199c8(0x241)];for(let _0x1b04bd in _0x329922){if(typeof _0x329922[_0x1b04bd]===_0xb199c8(0x229)){const _0x3027e3=val(_0x329922[_0x1b04bd]);if(typeof _0x3027e3===_0xb199c8(0x1f5))return _0x3027e3;}}}const _0x4bbaf9=parseFloat(_0x329922);return isNaN(_0x4bbaf9)?0x0:_0x4bbaf9;},cleanFileUrl=_0x4d025c=>{const _0x1ca5b1=a0_0x33ab40;if(!_0x4d025c)return _0x4d025c;return _0x4d025c[_0x1ca5b1(0x206)]('?')[0x0][_0x1ca5b1(0x206)]('#')[0x0];};async function getSelectionInfo(){const _0x36b3a6=a0_0x33ab40;try{const _0x3de0fb=require(_0x36b3a6(0x238))[_0x36b3a6(0x217)][_0x36b3a6(0x220)];if(_0x3de0fb&&_0x3de0fb['selection']){const _0x45b50d=_0x3de0fb[_0x36b3a6(0x208)][_0x36b3a6(0x214)];if(_0x45b50d&&val(_0x45b50d[_0x36b3a6(0x226)])-val(_0x45b50d[_0x36b3a6(0x203)])>0x0)return _0x45b50d;}}catch(_0x53849a){}try{const _0x5d8b39=await action['batchPlay']([{'_obj':_0x36b3a6(0x20e),'_target':[{'_ref':_0x36b3a6(0x258),'_property':_0x36b3a6(0x208)},{'_ref':_0x36b3a6(0x265),'_enum':_0x36b3a6(0x268),'_value':'targetEnum'}]}],{'synchronousExecution':!![]});if(_0x5d8b39&&_0x5d8b39[0x0]&&_0x5d8b39[0x0]['selection']){const _0x412719=_0x5d8b39[0x0][_0x36b3a6(0x208)];return _0x412719;}}catch(_0x2e2212){}return null;}async function fetchPixels(_0x55ab36,{layerID:_0x4ed56e,targetSize:_0x3cc60a,applyAlpha:applyAlpha=!![]}={}){const _0x2ba25a=a0_0x33ab40,_0xf04a6d={'documentID':_0x55ab36['id'],'applyAlpha':applyAlpha};if(_0x4ed56e)_0xf04a6d[_0x2ba25a(0x250)]=_0x4ed56e;if(_0x3cc60a)_0xf04a6d[_0x2ba25a(0x24c)]=_0x3cc60a;const _0x28bb66=await imaging['getPixels'](_0xf04a6d),_0x3f7da1=await _0x28bb66[_0x2ba25a(0x256)][_0x2ba25a(0x270)](),_0x46d73d=_0x3f7da1&&_0x3f7da1[_0x2ba25a(0x1f9)]?new Uint8Array(_0x3f7da1[_0x2ba25a(0x1f9)],_0x3f7da1[_0x2ba25a(0x222)],_0x3f7da1[_0x2ba25a(0x233)]):_0x3f7da1;return{'data':_0x46d73d,'w':_0x28bb66['imageData'][_0x2ba25a(0x243)],'h':_0x28bb66[_0x2ba25a(0x256)][_0x2ba25a(0x23f)],'cC':_0x28bb66[_0x2ba25a(0x256)][_0x2ba25a(0x228)],'dispose':()=>_0x28bb66[_0x2ba25a(0x23a)]?.()};}async function saveBufferToTemp(_0x5124b4,_0xd78d55){const _0x225cbc=a0_0x33ab40;if(!_0x5124b4||_0x5124b4[_0x225cbc(0x233)]===0x0||!_0xd78d55)return null;try{const _0x4121b5=await fs['getTemporaryFolder'](),_0x5e2456=await _0x4121b5['createFile'](_0xd78d55,{'overwrite':!![]});return await _0x5e2456[_0x225cbc(0x251)](_0x5124b4,{'format':formats[_0x225cbc(0x23b)]}),_0x5e2456[_0x225cbc(0x244)];}catch(_0x443b73){return null;}}async function getTempFilesInfo(){const _0x11d20f=a0_0x33ab40;try{const _0x5ee2cb=await fs[_0x11d20f(0x267)](),_0x39d027=await _0x5ee2cb[_0x11d20f(0x22a)]();return{'success':!![],'files':_0x39d027[_0x11d20f(0x242)](_0x1d3f56=>_0x1d3f56['isFile'])['map'](_0x73625d=>({'name':_0x73625d[_0x11d20f(0x218)],'nativePath':_0x73625d[_0x11d20f(0x244)],'modDate':_0x73625d[_0x11d20f(0x230)],'url':_0x11d20f(0x248)+_0x73625d['nativePath']}))};}catch(_0x13585d){return{'success':![],'error':_0x13585d['message']};}}async function deleteFile(_0x3f15c0){const _0x3e257f=a0_0x33ab40;try{if(!_0x3f15c0)return{'success':![],'error':_0x3e257f(0x1ef)};let _0x145081=decodeURIComponent(_0x3f15c0[_0x3e257f(0x23c)](/^(file|uxp-file):\/\/\/?/,''));const _0xe34e6d=_0x145081[_0x3e257f(0x206)](/[\\\/]/)['pop'](),_0xb84747=await fs['getTemporaryFolder'](),_0x34d6c5=await _0xb84747[_0x3e257f(0x26f)](_0xe34e6d);if(_0x34d6c5)await _0x34d6c5[_0x3e257f(0x271)]();return{'success':!![]};}catch(_0x3d0d81){return{'success':![],'error':_0x3d0d81[_0x3e257f(0x262)]};}}async function readBinaryFile(_0xcf24c){const _0x2f91ac=a0_0x33ab40;try{if(!_0xcf24c)return{'success':![],'error':'Empty\x20path'};let _0x31dead;try{if(_0xcf24c['startsWith'](_0x2f91ac(0x215))||_0xcf24c[_0x2f91ac(0x26d)](_0x2f91ac(0x1ed)))_0x31dead=await fs[_0x2f91ac(0x245)](_0xcf24c);}catch(_0x42bd55){}if(!_0x31dead){let _0x2afd57=decodeURIComponent(_0xcf24c[_0x2f91ac(0x23c)](/^(file|uxp-file):\/\/\/?/,''));const _0x1c1683=_0x2afd57[_0x2f91ac(0x206)](/[\\\/]/)['pop'](),_0x1d7b19=await fs[_0x2f91ac(0x267)]();_0x31dead=await _0x1d7b19[_0x2f91ac(0x26f)](_0x1c1683);}if(!_0x31dead)throw new Error('Could\x20not\x20locate\x20file\x20Entry\x20for\x20path:\x20'+_0xcf24c);const _0x10e090=await _0x31dead[_0x2f91ac(0x261)]({'format':formats[_0x2f91ac(0x23b)]});return{'success':!![],'buffer':Array['from'](new Uint8Array(_0x10e090))};}catch(_0x443095){return{'success':![],'error':_0x443095[_0x2f91ac(0x262)]};}}async function getActiveDocumentImage(_0x5c9919={}){const _0x2e995b=a0_0x33ab40,{baseMode:baseMode=_0x2e995b(0x211),namePrefix:namePrefix='',nodeId:nodeId=_0x2e995b(0x1fa),appId:appId=_0x2e995b(0x217)}=_0x5c9919;if(!app[_0x2e995b(0x220)])return{'success':![],'error':_0x2e995b(0x254)};if(!imaging||!imaging[_0x2e995b(0x22c)])return{'success':![],'error':'Photoshop\x20Imaging\x20API\x20not\x20available'};isProcessing=!![];try{const _0x1b3520=app[_0x2e995b(0x220)];let _0x25b0b2=null,_0x5f3b7=null,_0x552053=null,_0x162926=null;try{_0x162926=await getSelectionInfo();}catch(_0x5a39c7){}const _0x572bf0=parseInt(val(_0x1b3520[_0x2e995b(0x243)]))||0x0,_0x1157fb=parseInt(val(_0x1b3520['height']))||0x0;let _0x2051b6=_0x572bf0,_0x21654a=_0x1157fb,_0x34491a=0x0,_0x53b33d=0x0;_0x5c9919[_0x2e995b(0x21f)]&&_0x162926&&(_0x34491a=Math[_0x2e995b(0x266)](val(_0x162926[_0x2e995b(0x203)])),_0x53b33d=Math[_0x2e995b(0x266)](val(_0x162926[_0x2e995b(0x1fd)])),_0x2051b6=Math[_0x2e995b(0x266)](val(_0x162926[_0x2e995b(0x226)]))-_0x34491a,_0x21654a=Math[_0x2e995b(0x266)](val(_0x162926[_0x2e995b(0x21a)]))-_0x53b33d);let _0x2bb387=null,_0x125d70=null;return await executeAsModal(async _0xff0a8f=>{const _0x39f2cd=_0x2e995b;_0x2bb387=new Uint8Array(_0x2051b6*_0x21654a*0x4);for(let _0x349819=0x3;_0x349819<_0x2bb387[_0x39f2cd(0x20f)];_0x349819+=0x4)_0x2bb387[_0x349819]=0x0;if(baseMode===_0x39f2cd(0x211)){const _0x5cde24=await fetchPixels(_0x1b3520,{'targetSize':{'width':_0x572bf0,'height':_0x1157fb}});for(let _0x3211b4=0x0;_0x3211b4<_0x21654a;_0x3211b4++){const _0x243a32=_0x53b33d+_0x3211b4;if(_0x243a32<0x0||_0x243a32>=_0x1157fb)continue;for(let _0x13bfe7=0x0;_0x13bfe7<_0x2051b6;_0x13bfe7++){const _0x176d73=_0x34491a+_0x13bfe7;if(_0x176d73<0x0||_0x176d73>=_0x572bf0)continue;const _0x40cfcd=(_0x243a32*_0x572bf0+_0x176d73)*_0x5cde24['cC'],_0x35ca3b=(_0x3211b4*_0x2051b6+_0x13bfe7)*0x4;_0x2bb387[_0x35ca3b]=_0x5cde24['data'][_0x40cfcd],_0x2bb387[_0x35ca3b+0x1]=_0x5cde24[_0x39f2cd(0x201)][_0x40cfcd+0x1],_0x2bb387[_0x35ca3b+0x2]=_0x5cde24[_0x39f2cd(0x201)][_0x40cfcd+0x2],_0x2bb387[_0x35ca3b+0x3]=_0x5cde24['cC']===0x4?_0x5cde24[_0x39f2cd(0x201)][_0x40cfcd+0x3]:0xff;}}_0x5cde24[_0x39f2cd(0x23a)]();}else{const _0x510cad=_0x1b3520[_0x39f2cd(0x21e)][0x0];if(!_0x510cad)throw new Error(_0x39f2cd(0x212));const _0x65ddce=_0x510cad[_0x39f2cd(0x223)],_0x2c80f1=Math['round'](val(_0x65ddce[_0x39f2cd(0x1fd)])),_0x5df0c8=Math['round'](val(_0x65ddce[_0x39f2cd(0x203)])),_0x1e3d7f=await fetchPixels(_0x1b3520,{'layerID':_0x510cad['id'],'applyAlpha':![]});for(let _0x3311cc=0x0;_0x3311cc<_0x21654a;_0x3311cc++){const _0x3509a6=_0x53b33d+_0x3311cc,_0x260cb1=_0x3509a6-_0x2c80f1;if(_0x260cb1<0x0||_0x260cb1>=_0x1e3d7f['h'])continue;for(let _0x3fc66f=0x0;_0x3fc66f<_0x2051b6;_0x3fc66f++){const _0x40f9ba=_0x34491a+_0x3fc66f,_0x586bf6=_0x40f9ba-_0x5df0c8;if(_0x586bf6<0x0||_0x586bf6>=_0x1e3d7f['w'])continue;const _0x2336a7=(_0x260cb1*_0x1e3d7f['w']+_0x586bf6)*_0x1e3d7f['cC'],_0x4463fb=(_0x3311cc*_0x2051b6+_0x3fc66f)*0x4,_0x2fccec=_0x1e3d7f['cC']===0x4?_0x1e3d7f[_0x39f2cd(0x201)][_0x2336a7+0x3]:0xff;_0x2fccec>0x0&&(_0x2bb387[_0x4463fb]=_0x1e3d7f[_0x39f2cd(0x201)][_0x2336a7],_0x2bb387[_0x4463fb+0x1]=_0x1e3d7f[_0x39f2cd(0x201)][_0x2336a7+0x1],_0x2bb387[_0x4463fb+0x2]=_0x1e3d7f[_0x39f2cd(0x201)][_0x2336a7+0x2],_0x2bb387[_0x4463fb+0x3]=_0x2fccec);}}_0x1e3d7f[_0x39f2cd(0x23a)]();}const _0x916583=appId?String(appId)[_0x39f2cd(0x23c)](/[^a-zA-Z0-9_-]/g,'_'):_0x39f2cd(0x217),_0x32b58f=nodeId?String(nodeId)[_0x39f2cd(0x23c)](/\.(image|mask|text)$/,'')[_0x39f2cd(0x23c)](/[^a-zA-Z0-9_-]/g,'_'):_0x39f2cd(0x1fa),_0x5e8e3c=''+(namePrefix?namePrefix+'_':'')+_0x916583+'_'+_0x32b58f;if(_0x162926){let _0x3f55d2=null;try{const _0x2744ad=await action['batchPlay']([{'_obj':_0x39f2cd(0x22e),'_target':[{'_ref':_0x39f2cd(0x247)}]}],{});_0x3f55d2=_0x2744ad[0x0]?.[_0x39f2cd(0x250)],await action[_0x39f2cd(0x1f3)]([{'_obj':_0x39f2cd(0x21d),'mode':{'_enum':_0x39f2cd(0x239),'_value':'normal'},'using':{'_enum':_0x39f2cd(0x205),'_value':'white'}}],{});const _0x36dd1a=await fetchPixels(_0x1b3520,{'layerID':_0x3f55d2,'applyAlpha':![]}),_0x4b7767=await action[_0x39f2cd(0x1f3)]([{'_obj':_0x39f2cd(0x20e),'_target':[{'_ref':'property','_property':'bounds'},{'_ref':_0x39f2cd(0x247),'_id':_0x3f55d2}],'_options':{'dialogOptions':_0x39f2cd(0x1fc)}}],{'synchronousExecution':!![]}),_0x992e71=_0x4b7767[0x0][_0x39f2cd(0x214)],_0x5a914b=Math[_0x39f2cd(0x266)](val(_0x992e71[_0x39f2cd(0x1fd)])),_0x2071d4=Math[_0x39f2cd(0x266)](val(_0x992e71[_0x39f2cd(0x203)]));_0x125d70=new Uint8Array(_0x2051b6*_0x21654a*0x4);for(let _0x5003cf=0x3;_0x5003cf<_0x125d70[_0x39f2cd(0x20f)];_0x5003cf+=0x4)_0x125d70[_0x5003cf]=0x0;for(let _0x2f1e8b=0x0;_0x2f1e8b<_0x36dd1a['h'];_0x2f1e8b++){const _0x1c553d=_0x5a914b+_0x2f1e8b,_0x3631fa=_0x1c553d-_0x53b33d;if(_0x3631fa<0x0||_0x3631fa>=_0x21654a)continue;for(let _0x9d6798=0x0;_0x9d6798<_0x36dd1a['w'];_0x9d6798++){const _0x899b0d=_0x2071d4+_0x9d6798,_0x481604=_0x899b0d-_0x34491a;if(_0x481604<0x0||_0x481604>=_0x2051b6)continue;const _0x2c343e=(_0x2f1e8b*_0x36dd1a['w']+_0x9d6798)*_0x36dd1a['cC'],_0x5d5b39=(_0x3631fa*_0x2051b6+_0x481604)*0x4,_0x27fa2e=_0x36dd1a['cC']===0x4?_0x36dd1a[_0x39f2cd(0x201)][_0x2c343e+0x3]:_0x36dd1a['data'][_0x2c343e];_0x27fa2e>0x20&&(_0x125d70[_0x5d5b39]=0xff,_0x125d70[_0x5d5b39+0x1]=0x0,_0x125d70[_0x5d5b39+0x2]=0x0,_0x125d70[_0x5d5b39+0x3]=_0x27fa2e);}}if(!_0x5c9919['crop']){const _0x1e8b38=new PngEncoder(_0x2051b6,_0x21654a,0x4);_0x5f3b7=await saveBufferToTemp(_0x1e8b38['encode'](_0x125d70),_0x5e8e3c+_0x39f2cd(0x240));}_0x36dd1a[_0x39f2cd(0x23a)]();}catch(_0x42faa8){throw _0x42faa8;}finally{if(_0x3f55d2)try{await action[_0x39f2cd(0x1f3)]([{'_obj':_0x39f2cd(0x271),'_target':[{'_ref':_0x39f2cd(0x247),'_id':_0x3f55d2}]}],{});}catch(_0x1a0685){}}}const _0x35fa1a=new PngEncoder(_0x2051b6,_0x21654a,0x4);_0x25b0b2=await saveBufferToTemp(_0x35fa1a[_0x39f2cd(0x22b)](_0x2bb387),_0x5e8e3c+_0x39f2cd(0x1fb));if(_0x2bb387){const _0x115e31=new Uint8Array(_0x2051b6*_0x21654a*0x4);for(let _0x40fcba=0x0;_0x40fcba<_0x115e31[_0x39f2cd(0x20f)];_0x40fcba+=0x4){_0x115e31[_0x40fcba]=_0x2bb387[_0x40fcba],_0x115e31[_0x40fcba+0x1]=_0x2bb387[_0x40fcba+0x1],_0x115e31[_0x40fcba+0x2]=_0x2bb387[_0x40fcba+0x2],_0x115e31[_0x40fcba+0x3]=_0x125d70?Math[_0x39f2cd(0x252)](0x0,_0x2bb387[_0x40fcba+0x3]-_0x125d70[_0x40fcba+0x3]):_0x2bb387[_0x40fcba+0x3];}const _0x1748a8=new PngEncoder(_0x2051b6,_0x21654a,0x4);_0x552053=await saveBufferToTemp(_0x1748a8['encode'](_0x115e31),_0x5e8e3c+_0x39f2cd(0x24e));}},{'commandName':_0x2e995b(0x1f0)}),{'success':!![],'image':_0x25b0b2?_0x2e995b(0x248)+_0x25b0b2:null,'mask':_0x5f3b7?_0x2e995b(0x248)+_0x5f3b7:null,'rgba':_0x552053?_0x2e995b(0x248)+_0x552053:null,'width':_0x2051b6,'height':_0x21654a,'isLocal':!![]};}catch(_0x315935){return{'success':![],'error':_0x2e995b(0x264)+_0x315935[_0x2e995b(0x262)]};}finally{isProcessing=![];}}async function pickLocalFile(){const _0x39c182=a0_0x33ab40;try{const _0x5cdf75=await fs[_0x39c182(0x25d)]({'types':[_0x39c182(0x22d),_0x39c182(0x224),'jpeg','webp'],'allowMultiple':![]});if(!_0x5cdf75)return{'success':![],'error':_0x39c182(0x22f)};const _0x2e501b=await fs[_0x39c182(0x267)](),_0x26459e=await _0x5cdf75[_0x39c182(0x24f)](_0x2e501b,{'newName':_0x5cdf75[_0x39c182(0x218)],'overwrite':!![]});return{'success':!![],'image':_0x26459e[_0x39c182(0x244)],'name':_0x5cdf75[_0x39c182(0x218)],'isLocal':!![]};}catch(_0x139f8f){return{'success':![],'error':_0x139f8f[_0x39c182(0x262)]};}}async function pickFolder(){const _0x30f508=a0_0x33ab40;try{const _0x2763db=await fs[_0x30f508(0x24b)]();if(!_0x2763db)return{'success':![],'error':_0x30f508(0x22f)};const _0x3dcd03=await fs[_0x30f508(0x225)](_0x2763db);return{'success':!![],'path':_0x2763db['nativePath'],'token':_0x3dcd03};}catch(_0x73123f){return{'success':![],'error':_0x73123f[_0x30f508(0x262)]};}}async function getFolderTokenFromPath(_0x2da43a){const _0x38a41c=a0_0x33ab40;try{if(!_0x2da43a)return{'success':![],'error':_0x38a41c(0x1ef)};let _0x3ecc0f=await fs[_0x38a41c(0x245)]('file://'+_0x2da43a);if(!_0x3ecc0f||!_0x3ecc0f['isFolder'])return{'success':![],'error':_0x38a41c(0x249)};const _0x1b4578=await fs[_0x38a41c(0x225)](_0x3ecc0f);return{'success':!![],'path':_0x3ecc0f['nativePath'],'token':_0x1b4578};}catch(_0x5991a5){return{'success':![],'error':_0x38a41c(0x237)};}}async function listFiles(_0x1e6b7c){const _0xc3f648=a0_0x33ab40;try{if(!_0x1e6b7c)return{'success':![],'error':'No\x20token'};const _0x5c0cc6=await fs['getEntryForSessionToken'](_0x1e6b7c);if(!_0x5c0cc6||!_0x5c0cc6[_0xc3f648(0x213)])return{'success':![],'error':_0xc3f648(0x207)};const _0x2b0816=await _0x5c0cc6[_0xc3f648(0x22a)](),_0x135a95=_0x2b0816[_0xc3f648(0x242)](_0x233ba9=>_0x233ba9[_0xc3f648(0x1fe)]&&/\.(png|jpg|jpeg|webp)$/i[_0xc3f648(0x200)](_0x233ba9[_0xc3f648(0x218)]))[_0xc3f648(0x269)](_0x33d5c1=>({'name':_0x33d5c1[_0xc3f648(0x218)],'nativePath':_0x33d5c1[_0xc3f648(0x244)]}));return{'success':!![],'files':_0x135a95};}catch(_0x2940fa){return{'success':![],'error':_0x2940fa[_0xc3f648(0x262)]};}}async function loadFileByPath(_0x58508f,_0x1e01a2){const _0x3a6642=a0_0x33ab40;try{if(!_0x58508f||!_0x1e01a2)return{'success':![],'error':_0x3a6642(0x1f1)};const _0x1d4278=await fs['getEntryForSessionToken'](_0x58508f),_0x16eef1=await _0x1d4278[_0x3a6642(0x26f)](_0x1e01a2);if(!_0x16eef1||!_0x16eef1[_0x3a6642(0x1fe)])return{'success':![],'error':_0x3a6642(0x20d)};const _0x349efd=await fs[_0x3a6642(0x267)](),_0x1223f0=await _0x16eef1[_0x3a6642(0x24f)](_0x349efd,{'newName':_0x3a6642(0x234)+Date[_0x3a6642(0x25a)]()+'_'+_0x1e01a2,'overwrite':!![]});return{'success':!![],'image':_0x1223f0[_0x3a6642(0x244)],'name':_0x1e01a2,'isLocal':!![]};}catch(_0x35015c){return{'success':![],'error':_0x35015c[_0x3a6642(0x262)]};}}async function downloadUrlToTemp(_0x12496b,_0x4f9697){const _0x47c05c=a0_0x33ab40;if(!_0x4f9697)_0x4f9697=_0x47c05c(0x24d)+Date['now']()+_0x47c05c(0x23d);const _0x5dd5d6=await fetch(_0x12496b),_0x2af9f4=await _0x5dd5d6['arrayBuffer'](),_0x30c76b=await fs[_0x47c05c(0x267)](),_0x307dd2=await _0x30c76b[_0x47c05c(0x26c)](_0x4f9697,{'overwrite':!![]});return await _0x307dd2[_0x47c05c(0x251)](_0x2af9f4,{'format':formats['binary']}),{'success':!![],'nativePath':_0x307dd2[_0x47c05c(0x244)]};}async function createDocFromUrl(_0x3ef493){const _0x237173=a0_0x33ab40;try{let _0x3d57d2;const _0x2dbc9e=cleanFileUrl(_0x3ef493);if(_0x2dbc9e[_0x237173(0x26d)]('file://'))_0x3d57d2=await fs[_0x237173(0x245)](_0x2dbc9e);else{const _0x4a2e09=await downloadUrlToTemp(_0x2dbc9e,_0x237173(0x25b));_0x3d57d2=await fs[_0x237173(0x245)](_0x237173(0x248)+_0x4a2e09[_0x237173(0x244)]);}return await executeAsModal(async()=>{const _0x233516=_0x237173;await app[_0x233516(0x26b)](_0x3d57d2);},{'commandName':_0x237173(0x209)}),{'success':!![]};}catch(_0x38cff2){return{'success':![],'error':_0x38cff2[_0x237173(0x262)]};}}function a0_0x1cf7(_0x1ef603,_0x226a83){_0x1ef603=_0x1ef603-0x1eb;const _0x4857dd=a0_0x4857();let _0x1cf71d=_0x4857dd[_0x1ef603];if(a0_0x1cf7['vEaTGz']===undefined){var _0x46abab=function(_0x240cd4){const _0x58f274='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x329922='',_0x4bbaf9='';for(let _0x1b04bd=0x0,_0x3027e3,_0x4d025c,_0x3de0fb=0x0;_0x4d025c=_0x240cd4['charAt'](_0x3de0fb++);~_0x4d025c&&(_0x3027e3=_0x1b04bd%0x4?_0x3027e3*0x40+_0x4d025c:_0x4d025c,_0x1b04bd++%0x4)?_0x329922+=String['fromCharCode'](0xff&_0x3027e3>>(-0x2*_0x1b04bd&0x6)):0x0){_0x4d025c=_0x58f274['indexOf'](_0x4d025c);}for(let _0x45b50d=0x0,_0x53849a=_0x329922['length'];_0x45b50d<_0x53849a;_0x45b50d++){_0x4bbaf9+='%'+('00'+_0x329922['charCodeAt'](_0x45b50d)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x4bbaf9);};a0_0x1cf7['VoPvOr']=_0x46abab,a0_0x1cf7['hKUsJT']={},a0_0x1cf7['vEaTGz']=!![];}const _0x30358e=_0x4857dd[0x0],_0x3eec46=_0x1ef603+_0x30358e,_0x50bbdb=a0_0x1cf7['hKUsJT'][_0x3eec46];return!_0x50bbdb?(_0x1cf71d=a0_0x1cf7['VoPvOr'](_0x1cf71d),a0_0x1cf7['hKUsJT'][_0x3eec46]=_0x1cf71d):_0x1cf71d=_0x50bbdb,_0x1cf71d;}async function placeImageFromUrl(_0x46ce73,_0xb202e1=![]){const _0x222f97=a0_0x33ab40;try{let _0x504f81;const _0x2596ca=cleanFileUrl(_0x46ce73);if(_0x2596ca['startsWith'](_0x222f97(0x248)))_0x504f81=await fs[_0x222f97(0x245)](_0x2596ca);else{const _0x5835c4=await downloadUrlToTemp(_0x2596ca,_0x222f97(0x221));_0x504f81=await fs[_0x222f97(0x245)](_0x222f97(0x248)+_0x5835c4[_0x222f97(0x244)]);}return await executeAsModal(async()=>{const _0x2fbfb4=_0x222f97,_0x59aa4d=app[_0x2fbfb4(0x220)],_0x4f39e5=Number(val(_0x59aa4d[_0x2fbfb4(0x243)])),_0x125469=Number(val(_0x59aa4d[_0x2fbfb4(0x23f)]));let _0xeb74e5={'left':0x0,'top':0x0,'right':_0x4f39e5,'bottom':_0x125469};const _0x31d197=await getSelectionInfo();if(_0x31d197){const _0x24d6a0=Number(val(_0x31d197[_0x2fbfb4(0x203)])),_0x15034b=Number(val(_0x31d197[_0x2fbfb4(0x1fd)])),_0x5622d0=Number(val(_0x31d197['right'])),_0x15fd85=Number(val(_0x31d197[_0x2fbfb4(0x21a)]));_0x5622d0-_0x24d6a0>0x1&&_0x15fd85-_0x15034b>0x1&&(_0xeb74e5={'left':_0x24d6a0,'top':_0x15034b,'right':_0x5622d0,'bottom':_0x15fd85});}const _0xfb7923=await fs[_0x2fbfb4(0x225)](_0x504f81);await batchPlay([{'_obj':_0x2fbfb4(0x260),'target':{'_path':_0xfb7923,'_kind':_0x2fbfb4(0x232)},'linked':!![]}],{});const _0x5aa8b6=_0x59aa4d[_0x2fbfb4(0x21e)][0x0],_0x4b68e9=_0x5aa8b6[_0x2fbfb4(0x223)],_0x15bdb9=Number(val(_0x4b68e9[_0x2fbfb4(0x203)])),_0x21bce7=Number(val(_0x4b68e9[_0x2fbfb4(0x1fd)])),_0x358e59=Number(val(_0x4b68e9[_0x2fbfb4(0x226)])),_0x57d3ad=Number(val(_0x4b68e9[_0x2fbfb4(0x21a)])),_0x16ced7=_0x358e59-_0x15bdb9,_0x9dac4b=_0x57d3ad-_0x21bce7,_0x10a2e4=(_0x15bdb9+_0x358e59)/0x2,_0x148671=(_0x21bce7+_0x57d3ad)/0x2,_0x272c4f=_0xeb74e5[_0x2fbfb4(0x226)]-_0xeb74e5[_0x2fbfb4(0x203)],_0x5e1c4a=_0xeb74e5[_0x2fbfb4(0x21a)]-_0xeb74e5[_0x2fbfb4(0x1fd)],_0x3aa9f0=(_0xeb74e5[_0x2fbfb4(0x203)]+_0xeb74e5[_0x2fbfb4(0x226)])/0x2,_0x371611=(_0xeb74e5[_0x2fbfb4(0x1fd)]+_0xeb74e5[_0x2fbfb4(0x21a)])/0x2;let _0xd0da0c=0x64,_0x2b0800=0x64,_0xf8c659=_0x3aa9f0,_0x48c84e=_0x371611;_0xb202e1?(_0xf8c659=_0x4f39e5/0x2,_0x48c84e=_0x125469/0x2,_0xd0da0c=0x64,_0x2b0800=0x64):(_0xd0da0c=_0x272c4f/_0x16ced7*0x64,_0x2b0800=_0x5e1c4a/_0x9dac4b*0x64);const _0x5306ff=_0xf8c659-_0x10a2e4,_0x1b509c=_0x48c84e-_0x148671;await action[_0x2fbfb4(0x1f3)]([{'_obj':_0x2fbfb4(0x20b),'_target':[{'_ref':_0x2fbfb4(0x247),'_enum':_0x2fbfb4(0x268),'_value':'targetEnum'}],'freeTransformCenterState':{'_enum':_0x2fbfb4(0x24a),'_value':'QCSAverage'},'offset':{'_obj':_0x2fbfb4(0x20a),'horizontal':{'_unit':'pixelsUnit','_value':_0x5306ff},'vertical':{'_unit':_0x2fbfb4(0x26e),'_value':_0x1b509c}},'width':{'_unit':'percentUnit','_value':_0xd0da0c},'height':{'_unit':_0x2fbfb4(0x1f4),'_value':_0x2b0800},'interpolation':{'_enum':_0x2fbfb4(0x1ff),'_value':_0x2fbfb4(0x1ec)}}],{}),await action[_0x2fbfb4(0x1f3)]([{'_obj':_0x2fbfb4(0x21b),'_target':[{'_ref':_0x2fbfb4(0x247),'_enum':'ordinal','_value':_0x2fbfb4(0x231)}]}],{});},{'commandName':_0x222f97(0x246)}),{'success':!![]};}catch(_0x5e0cd2){return{'success':![],'error':_0x5e0cd2[_0x222f97(0x262)]};}}function getDocumentInfo(){const _0x2553e3=a0_0x33ab40;if(!app||!app['activeDocument'])return{'hasDocument':![]};const _0x2cfb19=app['activeDocument'];return{'hasDocument':!![],'width':val(_0x2cfb19['width']),'height':val(_0x2cfb19[_0x2553e3(0x23f)])};}function startSelectionListener(_0x28c0de){const _0x457c7f=a0_0x33ab40;if(!action||!action[_0x457c7f(0x1ee)])return;let _0x57de61=null;action[_0x457c7f(0x1ee)]([_0x457c7f(0x253)],(_0x47cf45,_0x257eca)=>{const _0xdb7797=_0x457c7f,_0x29dc76=[_0xdb7797(0x1f8),_0xdb7797(0x255),_0xdb7797(0x227),_0xdb7797(0x22e),_0xdb7797(0x204),_0xdb7797(0x20b),_0xdb7797(0x210),_0xdb7797(0x1f7),'delete'];if(_0x29dc76[_0xdb7797(0x219)](_0x47cf45)){if(_0x57de61)clearTimeout(_0x57de61);_0x57de61=setTimeout(()=>{if(!isProcessing&&_0x28c0de)_0x28c0de();},0x258);}});}window[a0_0x33ab40(0x20c)]={'getActiveDocumentImage':getActiveDocumentImage,'createDocFromUrl':createDocFromUrl,'placeImageFromUrl':placeImageFromUrl,'downloadUrlToTemp':downloadUrlToTemp,'getDocumentInfo':getDocumentInfo,'startSelectionListener':startSelectionListener,'deleteFile':deleteFile,'getTempFilesInfo':getTempFilesInfo,'pickLocalFile':pickLocalFile,'pickFolder':pickFolder,'getFolderTokenFromPath':getFolderTokenFromPath,'listFiles':listFiles,'loadFileByPath':loadFileByPath,'readBinaryFile':readBinaryFile,'showAlert':_0x5ece54=>app['showAlert'](_0x5ece54)};
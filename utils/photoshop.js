const a0_0x2e32e8=a0_0x2b97;(function(_0x167ed1,_0x101a25){const _0x485131=a0_0x2b97,_0x4410d1=_0x167ed1();while(!![]){try{const _0x15cbb5=-parseInt(_0x485131(0xfb))/0x1+-parseInt(_0x485131(0x156))/0x2*(parseInt(_0x485131(0xf7))/0x3)+parseInt(_0x485131(0x12e))/0x4+parseInt(_0x485131(0x12a))/0x5*(parseInt(_0x485131(0x122))/0x6)+-parseInt(_0x485131(0xfa))/0x7*(-parseInt(_0x485131(0xf1))/0x8)+-parseInt(_0x485131(0x10c))/0x9*(parseInt(_0x485131(0x145))/0xa)+parseInt(_0x485131(0x108))/0xb;if(_0x15cbb5===_0x101a25)break;else _0x4410d1['push'](_0x4410d1['shift']());}catch(_0x5a76dd){_0x4410d1['push'](_0x4410d1['shift']());}}}(a0_0xd0a6,0x76b11));function a0_0xd0a6(){const _0x5f1230=['BwfW','Bgf5zxjjra','mtK4mZz1y2HpAMu','zgLZCg9Zzq','ywrKtM90AwzPy2f0Aw9UtgLZDgvUzxi','yM91BMrZtM9fzMzLy3rZ','CMDIyq','yM90Dg9T','tM8Gywn0AxzLigrVy3vTzw50','zM9YBwf0CW','mtG1B2jWANDg','zw5JB2rL','BwvZC2fNzq','ugXHy2uGyw5KiefSAwDUieLTywDL','mZaXmJC0ogjpy0v2vq','ChjVCgvYDhK','y2fUDMfZ','C2vSzwn0','zw5KC1DPDgG','Cg9W','yMXHy2S','zgvSzxrL','lI91DgLSCY9WBMDFzw5JB2rLCI5QCW','DhjHBNnMB3jT','ywn0AxzLrg9JDw1LBNq','zg9JDw1LBNq','yM91BMrZ','AxnbCNjHEq','yMLUyxj5','Aw1Hz2u','rw1WDhKGCgf0Aa','CMvWBgfJzq','AgvPz2H0','zgf0yq','AxngAwXL','Dg9W','zg9UDerPC3bSyxK','mZGWA1nAy0LL','CgL4zwXZvw5PDa','Cg5N','BgvUz3rO','CM91BMq','D3jPDgu','rMLSzsbUB3qGzM91BMq','CxvHzenLBNrLCLn0yxrL','ANbN','z2v0qwn0AxzLrg9JDw1LBNrjBwfNzsbfCNjVCG','CMvHza','C3rVCMfNzq','Aw5JBhvKzxm','zxjYB3i','yxjYyxLcDwzMzxi','BM9YBwfS','Aw50zxjWB2XHDgLVBLr5Cgu','mtG0zLrLvhjl','C29YDa','rMLSzsbUB3qGzM91BMqGAw4GDgvTCcbZDg9YywDL','B2zMC2v0','uuntqxzLCMfNzq','zMLSzq','Bw92zq','z2v0rw50CNLxAxrOvxjS','Bg9JywXgAwXLu3LZDgvT','y3jLyxrLu2vZC2LVBLrVA2vU','Bgf5zxi','z2v0ugL4zwXZ','BwfZA19WCMv2Awv3','zMLSztOVlW','z2v0rw50CMLLCW','q3jLyxrLie5LDYbeB2n1BwvUDa','C3bSAxq','qML6EufPCIbjBwfNzsbby3f1AxnPDgLVBG','DgfYz2v0rw51Bq','z2v0rw50CNK','DxHWx2rVD25SB2fKxW','CMLNAhq','w0jPENLbAxjDie1HC2SGy2fWDhvYzsbMywLSzwq','x3rHCMDLDa','D2LKDgG','zg93BMXVywrF','B3bLBG','BMfTzq','lNbUzW','zMLSBa','odi1odK2thjKu01P','x3jLzG','ywn0AxzLtgf5zxjZ','DMfSDwu','Aw1Hz2veyxrH','BwfRzq','mty2mtDsyKf1v2K','C2vSzwn0Aw9U','yMLJDwjPyW','n1Lnrw1vEq','nta5otu1vK5IuKTK','zMLSBenVBNrLBNrZ','BgvMDa','CgLJA0XVy2fSrMLSzsbfCNjVCG','y2HHBM5LBa','yML6EwfPCL9SyxLLCL8','x3zHBhvL','Aw50zxjWB2XHDgLVBG','CMvZzxq','AgLKzq','D2vICa','A2v5CW','D2HPDgu','mtqYmduWmJz2tKz2thu','sw52ywXPzcbMAwXLBMfTzq','CMfZDgvYAxPLtgf5zxi','y29TCg9Uzw50CW','mtGXmdq0EfvdvM5M','z2v0rgf0yq','yMf0y2HqBgf5','zNjVBq','CgvYy2vUDfvUAxq','C2v0','B3jKAw5HBa','y29WEvrV','C3rHCNrZv2L0Aa','BwLU','C29Tzq','C2HVDW','B2jQzwn0','x3bYB3bLCNr5','z2v0vgvTCg9Yyxj5rM9SzgvY','Bg9JywXLq29TCgfYzq','BMf0AxzLugf0Aa','DxHW','yML6EwfPCL8','Bg9JywW'];a0_0xd0a6=function(){return _0x5f1230;};return a0_0xd0a6();}const {app,action,core,imaging}=require('photoshop'),{batchPlay}=action,fs=require(a0_0x2e32e8(0x11d))[a0_0x2e32e8(0x150)][a0_0x2e32e8(0x15e)],formats=require(a0_0x2e32e8(0x11d))[a0_0x2e32e8(0x150)][a0_0x2e32e8(0x129)],executeAsModal=core['executeAsModal'],PngEncoder=require(a0_0x2e32e8(0x136));let isProcessing=![];const val=_0x351719=>{const _0x10cdcd=a0_0x2e32e8;if(_0x351719===null||_0x351719===undefined)return 0x0;if(typeof _0x351719===_0x10cdcd(0x118)){if(_0x351719[_0x10cdcd(0xf4)]!==undefined)return _0x351719[_0x10cdcd(0xf4)];if(_0x351719[_0x10cdcd(0x101)]!==undefined)return _0x351719[_0x10cdcd(0x101)];if(Object[_0x10cdcd(0x106)](_0x351719)[_0x10cdcd(0x148)]===0x1){const _0x9c6e17=Object[_0x10cdcd(0x106)](_0x351719)[0x0];return val(_0x351719[_0x9c6e17]);}}return _0x351719;};function a0_0x2b97(_0xc4944f,_0x22aeb9){_0xc4944f=_0xc4944f-0xe4;const _0xd0a6cb=a0_0xd0a6();let _0x2b97c0=_0xd0a6cb[_0xc4944f];if(a0_0x2b97['UzQecX']===undefined){var _0x7e9165=function(_0x3d4e20){const _0x50f63b='abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789+/=';let _0x351719='',_0x9c6e17='';for(let _0x37ee50=0x0,_0x131d0e,_0x3438bd,_0x57b93f=0x0;_0x3438bd=_0x3d4e20['charAt'](_0x57b93f++);~_0x3438bd&&(_0x131d0e=_0x37ee50%0x4?_0x131d0e*0x40+_0x3438bd:_0x3438bd,_0x37ee50++%0x4)?_0x351719+=String['fromCharCode'](0xff&_0x131d0e>>(-0x2*_0x37ee50&0x6)):0x0){_0x3438bd=_0x50f63b['indexOf'](_0x3438bd);}for(let _0x3f9515=0x0,_0x350613=_0x351719['length'];_0x3f9515<_0x350613;_0x3f9515++){_0x9c6e17+='%'+('00'+_0x351719['charCodeAt'](_0x3f9515)['toString'](0x10))['slice'](-0x2);}return decodeURIComponent(_0x9c6e17);};a0_0x2b97['niWjQx']=_0x7e9165,a0_0x2b97['LuFuVn']={},a0_0x2b97['UzQecX']=!![];}const _0x2a81be=_0xd0a6cb[0x0],_0x46c66e=_0xc4944f+_0x2a81be,_0x53e1f1=a0_0x2b97['LuFuVn'][_0x46c66e];return!_0x53e1f1?(_0x2b97c0=a0_0x2b97['niWjQx'](_0x2b97c0),a0_0x2b97['LuFuVn'][_0x46c66e]=_0x2b97c0):_0x2b97c0=_0x53e1f1,_0x2b97c0;}async function getSelectionInfo(){const _0x21a337=a0_0x2e32e8;try{const _0x37ee50=await action[_0x21a337(0x10e)]([{'_obj':'get','_target':[{'_ref':_0x21a337(0x12f),'_property':_0x21a337(0xf8)},{'_ref':_0x21a337(0x139),'_enum':_0x21a337(0x112),'_value':_0x21a337(0xe5)}],'_options':{'dialogOptions':_0x21a337(0x144)}}],{'synchronousExecution':!![]});if(_0x37ee50&&_0x37ee50[0x0]&&_0x37ee50[0x0][_0x21a337(0xf8)])return _0x37ee50[0x0][_0x21a337(0xf8)];return null;}catch(_0x131d0e){return null;}}function calculateTargetSize(_0x3438bd,_0x57b93f){const _0x3705c0=a0_0x2e32e8;let _0x3f9515=_0x3438bd[_0x3705c0(0xeb)],_0x350613=_0x3438bd[_0x3705c0(0x140)],_0x15f1e5=_0x3f9515,_0x48d99d=_0x350613;if(_0x57b93f&&(_0x3f9515>_0x57b93f||_0x350613>_0x57b93f)){const _0x467eb7=Math[_0x3705c0(0x115)](_0x57b93f/_0x3f9515,_0x57b93f/_0x350613);_0x15f1e5=Math['round'](_0x3f9515*_0x467eb7),_0x48d99d=Math[_0x3705c0(0x149)](_0x350613*_0x467eb7);}return{'width':_0x15f1e5,'height':_0x48d99d};}async function encodeToPng(_0x16dbf0){const _0x1811d0=a0_0x2e32e8;if(!_0x16dbf0||!_0x16dbf0[_0x1811d0(0xf5)])throw new Error('Failed\x20to\x20retrieve\x20image\x20data.');try{const _0x1036c9=await imaging['encodeImageData']({'imageData':_0x16dbf0['imageData'],'format':_0x1811d0(0x147),'base64':![]});return _0x1036c9;}finally{_0x16dbf0[_0x1811d0(0x123)]&&_0x16dbf0[_0x1811d0(0x123)]();}}async function saveBufferToTemp(_0x139255,_0x54823d,_0x52b503,_0x57ad30){const _0x2b3b74=a0_0x2e32e8,_0x30e4a3=_0x57ad30?String(_0x57ad30)[_0x2b3b74(0x13f)](/[^a-zA-Z0-9_-]/g,'_'):'';let _0x53bb67=_0x54823d?String(_0x54823d)[_0x2b3b74(0x13f)](/[^a-zA-Z0-9_-]/g,'_')[_0x2b3b74(0x13f)](/(_image|_mask_preview|_mask|_rgba)$/g,''):'';if(!_0x53bb67)_0x53bb67=_0x52b503||_0x2b3b74(0x15b);let _0x4ffceb=_0x30e4a3?_0x30e4a3+'_'+_0x53bb67+'_'+_0x52b503+'.png':_0x53bb67+'_'+_0x52b503+_0x2b3b74(0xef);const _0x370dcf=await fs[_0x2b3b74(0x11a)](),_0x520879=await _0x370dcf['createFile'](_0x4ffceb,{'overwrite':!![]});return await _0x520879['write'](_0x139255,{'format':formats[_0x2b3b74(0x13c)]}),_0x520879[_0x2b3b74(0x11c)];}async function getActiveDocumentImage(_0x58cc67={}){const _0x5e2423=a0_0x2e32e8,{baseMode:baseMode=_0x5e2423(0x130),nodeId:_0x35f57d,appId:_0x3e395c}=_0x58cc67;if(!app['activeDocument'])return{'success':![],'error':_0x5e2423(0x128)};isProcessing=!![];try{const _0x4d9d83=app[_0x5e2423(0x138)];let _0x460376=null,_0xd0ed9e=null,_0x2a58fe=null;const _0x2e98df=parseInt(val(_0x4d9d83[_0x5e2423(0xeb)]))||0x0,_0x558a24=parseInt(val(_0x4d9d83[_0x5e2423(0x140)]))||0x0,_0x2f2d9d=_0x2e98df,_0x3a4934=_0x558a24;let _0x20bcf6=null,_0x5a169f=null;return await executeAsModal(async _0x20fe06=>{const _0x394687=_0x5e2423;let _0x6acb2c=null;if(baseMode==='canvas'){const _0x334dd2=await imaging[_0x394687(0x161)]({'documentID':_0x4d9d83['id'],'targetSize':{'width':_0x2f2d9d,'height':_0x3a4934},'applyAlpha':!![]}),_0x186072=_0x334dd2[_0x394687(0xf5)][_0x394687(0xeb)],_0x456b53=_0x334dd2[_0x394687(0xf5)][_0x394687(0x140)],_0x221c10=_0x334dd2[_0x394687(0xf5)]['components']||0x4;let _0x1e9cb8=await _0x334dd2[_0x394687(0xf5)][_0x394687(0x10d)]();if(_0x1e9cb8&&_0x1e9cb8[_0x394687(0x141)])_0x1e9cb8=_0x1e9cb8['data'];_0x20bcf6=new Uint8Array(_0x2f2d9d*_0x3a4934*0x4);for(let _0x4b0ece=0x0;_0x4b0ece<_0x2f2d9d*_0x3a4934;_0x4b0ece++){const _0x27a857=_0x4b0ece*_0x221c10,_0x33fe5e=_0x4b0ece*0x4;_0x20bcf6[_0x33fe5e]=_0x1e9cb8[_0x27a857],_0x20bcf6[_0x33fe5e+0x1]=_0x1e9cb8[_0x27a857+0x1],_0x20bcf6[_0x33fe5e+0x2]=_0x1e9cb8[_0x27a857+0x2],_0x20bcf6[_0x33fe5e+0x3]=_0x221c10===0x4?_0x1e9cb8[_0x27a857+0x3]:0xff;}const _0x190180=new PngEncoder(_0x2f2d9d,_0x3a4934,0x4);_0x6acb2c=_0x190180[_0x394687(0x12b)](_0x20bcf6);}else{const _0x124c6=_0x4d9d83[_0x394687(0xf3)][0x0];if(!_0x124c6)throw new Error('No\x20active\x20layer\x20selected');const _0x390c31=_0x124c6['boundsNoEffects'],_0x4bae94=parseInt(val(_0x390c31[_0x394687(0x143)]))||0x0,_0x36d674=parseInt(val(_0x390c31[_0x394687(0xfd)]))||0x0,_0x2c7fd8=await imaging[_0x394687(0x161)]({'documentID':_0x4d9d83['id'],'layerID':_0x124c6['id'],'applyAlpha':!![]}),_0x5e482d=_0x2c7fd8[_0x394687(0xf5)][_0x394687(0xeb)],_0x31bc63=_0x2c7fd8['imageData']['height'],_0x570662=_0x2c7fd8[_0x394687(0xf5)][_0x394687(0x10b)]||0x4;let _0x336206=await _0x2c7fd8['imageData']['getData']();if(_0x336206&&_0x336206['data'])_0x336206=_0x336206[_0x394687(0x141)];_0x20bcf6=new Uint8Array(_0x2f2d9d*_0x3a4934*0x4);if(_0x336206&&_0x336206[_0x394687(0x148)]>0x0)for(let _0x361498=0x0;_0x361498<_0x31bc63;_0x361498++){const _0x290dfe=_0x4bae94+_0x361498;if(_0x290dfe<0x0||_0x290dfe>=_0x3a4934)continue;for(let _0x3d94b9=0x0;_0x3d94b9<_0x5e482d;_0x3d94b9++){const _0x522f4f=_0x36d674+_0x3d94b9;if(_0x522f4f<0x0||_0x522f4f>=_0x2f2d9d)continue;const _0x26b2b4=(_0x361498*_0x5e482d+_0x3d94b9)*_0x570662,_0x5bd9df=(_0x290dfe*_0x2f2d9d+_0x522f4f)*0x4;_0x20bcf6[_0x5bd9df]=_0x336206[_0x26b2b4],_0x20bcf6[_0x5bd9df+0x1]=_0x336206[_0x26b2b4+0x1],_0x20bcf6[_0x5bd9df+0x2]=_0x336206[_0x26b2b4+0x2];if(_0x570662===0x4)_0x20bcf6[_0x5bd9df+0x3]=_0x336206[_0x26b2b4+0x3];else{const _0xc3dca4=_0x336206[_0x26b2b4]===0xff&&_0x336206[_0x26b2b4+0x1]===0xff&&_0x336206[_0x26b2b4+0x2]===0xff;_0x20bcf6[_0x5bd9df+0x3]=_0xc3dca4?0x0:0xff;}}}if(_0x2c7fd8['dispose'])_0x2c7fd8['dispose']();const _0x5af1c1=new PngEncoder(_0x2f2d9d,_0x3a4934,0x4);_0x6acb2c=_0x5af1c1[_0x394687(0x12b)](_0x20bcf6);}_0x460376=await saveBufferToTemp(_0x6acb2c,_0x35f57d,_0x394687(0x13d),_0x3e395c);let _0x4a95b5=null;try{_0x4a95b5=await getSelectionInfo();}catch(_0x2f98cd){}if(_0x4a95b5){let _0x22ab53=null;try{const _0x259778=Math['round'](val(_0x4a95b5[_0x394687(0xfd)]))||0x0,_0x4854bb=Math[_0x394687(0x149)](val(_0x4a95b5[_0x394687(0x143)]))||0x0,_0x4553cb=await action[_0x394687(0x10e)]([{'_obj':_0x394687(0xf6),'_target':[{'_ref':_0x394687(0x160)}]},{'_obj':_0x394687(0xf0),'mode':{'_enum':_0x394687(0x102),'_value':_0x394687(0x154)},'opacity':{'_unit':_0x394687(0x110),'_value':0x64},'using':{'_enum':_0x394687(0xfc),'_value':_0x394687(0x134)}},{'_obj':_0x394687(0xf0),'mode':{'_enum':_0x394687(0x102),'_value':_0x394687(0x154)},'opacity':{'_unit':'percentUnit','_value':0x64},'using':{'_enum':_0x394687(0xfc),'_value':_0x394687(0x107)}}],{});_0x22ab53=_0x4553cb[0x0]?.[_0x394687(0x121)];const _0x51d120=await imaging[_0x394687(0x161)]({'documentID':_0x4d9d83['id'],'layerID':_0x22ab53});let _0xb3b499=await _0x51d120[_0x394687(0xf5)][_0x394687(0x10d)]();if(_0xb3b499&&_0xb3b499['data'])_0xb3b499=_0xb3b499[_0x394687(0x141)];const _0x3c6f7a=_0x51d120[_0x394687(0xf5)]['width'],_0x4af8ea=_0x51d120[_0x394687(0xf5)][_0x394687(0x140)],_0x4b8d74=_0x51d120[_0x394687(0xf5)][_0x394687(0x10b)]||0x1;_0x5a169f=new Uint8Array(_0x2f2d9d*_0x3a4934*0x4);const _0x127190=Math[_0x394687(0x115)](_0x3c6f7a,_0x2f2d9d),_0x378791=Math[_0x394687(0x115)](_0x4af8ea,_0x3a4934);for(let _0x4b2a6b=0x0;_0x4b2a6b<_0x378791;_0x4b2a6b++){const _0xbf413d=_0x4854bb+_0x4b2a6b;if(_0xbf413d<0x0||_0xbf413d>=_0x3a4934)continue;for(let _0x63c4cb=0x0;_0x63c4cb<_0x127190;_0x63c4cb++){const _0x1b5ac4=_0x259778+_0x63c4cb;if(_0x1b5ac4<0x0||_0x1b5ac4>=_0x2f2d9d)continue;const _0x12c831=(_0x4b2a6b*_0x3c6f7a+_0x63c4cb)*_0x4b8d74,_0x450837=(_0xbf413d*_0x2f2d9d+_0x1b5ac4)*0x4;let _0x48cfa2=_0xb3b499[_0x12c831];if(_0x4b8d74>=0x2&&_0xb3b499[_0x12c831+_0x4b8d74-0x1]<0x80)_0x48cfa2=0x0;_0x5a169f[_0x450837]=0xff,_0x5a169f[_0x450837+0x1]=0x0,_0x5a169f[_0x450837+0x2]=0x0,_0x5a169f[_0x450837+0x3]=_0x48cfa2;}}if(_0x51d120[_0x394687(0x123)])_0x51d120['dispose']();const _0x21a0f4=new PngEncoder(_0x2f2d9d,_0x3a4934,0x4),_0x12e3d4=_0x21a0f4['encode'](_0x5a169f);_0xd0ed9e=await saveBufferToTemp(_0x12e3d4,_0x35f57d,_0x394687(0x162),_0x3e395c);}catch(_0x1cd304){console['error'](_0x394687(0xe9),_0x1cd304);}finally{if(_0x22ab53!==null)try{await action[_0x394687(0x10e)]([{'_obj':_0x394687(0x135),'_target':[{'_ref':_0x394687(0x160),'_id':_0x22ab53}]}],{});}catch(_0x5d0890){}}}const _0x3f5440=new Uint8Array(_0x2f2d9d*_0x3a4934*0x4);if(_0x20bcf6){for(let _0x529561=0x0;_0x529561<_0x3f5440['length'];_0x529561+=0x4){_0x3f5440[_0x529561]=_0x20bcf6[_0x529561],_0x3f5440[_0x529561+0x1]=_0x20bcf6[_0x529561+0x1],_0x3f5440[_0x529561+0x2]=_0x20bcf6[_0x529561+0x2],_0x5a169f?_0x3f5440[_0x529561+0x3]=0xff-_0x5a169f[_0x529561+0x3]:_0x3f5440[_0x529561+0x3]=0xff;}const _0x9471a8=new PngEncoder(_0x2f2d9d,_0x3a4934,0x4),_0xd74239=_0x9471a8['encode'](_0x3f5440);_0xd74239&&(_0x2a58fe=await saveBufferToTemp(_0xd74239,_0x35f57d,_0x394687(0x126),_0x3e395c));}},{'commandName':_0x5e2423(0xe4)}),{'success':!![],'image':_0x460376,'mask':_0xd0ed9e,'rgba':_0x2a58fe,'width':_0x2f2d9d,'height':_0x3a4934,'isLocal':!![]};}catch(_0x5d9739){return console['error'](_0x5e2423(0x14e),_0x5d9739),{'success':![],'error':_0x5d9739[_0x5e2423(0x12c)]||String(_0x5d9739)};}finally{isProcessing=![];}}async function pickLocalFile(){const _0x2e8b0c=a0_0x2e32e8;try{const _0x3e2d29=await fs['getFileForOpening']({'types':[_0x2e8b0c(0x147),_0x2e8b0c(0x14d),'jpeg',_0x2e8b0c(0x105)],'allowMultiple':![]});if(!_0x3e2d29)return{'success':![],'error':'User\x20cancelled'};const _0x17b9f9=await fs['getTemporaryFolder'](),_0x526d82=_0x3e2d29[_0x2e8b0c(0xee)],_0x31e266=await _0x3e2d29[_0x2e8b0c(0x113)](_0x17b9f9,{'newName':_0x526d82,'overwrite':!![]});return{'success':!![],'image':_0x31e266[_0x2e8b0c(0x11c)],'name':_0x3e2d29[_0x2e8b0c(0xee)],'isLocal':!![]};}catch(_0x17bbfb){return console[_0x2e8b0c(0x152)](_0x2e8b0c(0xfe),_0x17bbfb),{'success':![],'error':_0x17bbfb[_0x2e8b0c(0x12c)]};}}async function downloadUrlToTemp(_0x5a6c87,_0x3143aa){const _0x45c3f4=a0_0x2e32e8;if(!_0x3143aa)_0x3143aa=_0x45c3f4(0xec)+Date['now']()+_0x45c3f4(0xef);const _0x633f5e=await fetch(_0x5a6c87),_0x4d9fd3=await _0x633f5e[_0x45c3f4(0x153)](),_0x3cd8ef=await fs[_0x45c3f4(0x11a)](),_0x52bc99=await _0x3cd8ef['createFile'](_0x3143aa,{'overwrite':!![]});return await _0x52bc99[_0x45c3f4(0x14a)](_0x4d9fd3,{'format':formats[_0x45c3f4(0x13c)]}),{'success':!![],'nativePath':_0x52bc99[_0x45c3f4(0x11c)]};}async function createDocFromUrl(_0xef65fe){const _0xf73f85=a0_0x2e32e8;try{let _0x1b72ca;if(_0xef65fe[_0xf73f85(0x114)]('file://'))_0x1b72ca=await fs[_0xf73f85(0x15d)](_0xef65fe);else{const _0x407505=await downloadUrlToTemp(_0xef65fe,'bizyair_result_');_0x1b72ca=await fs['getEntryWithUrl'](_0xf73f85(0x163)+_0x407505[_0xf73f85(0x11c)]);}return await executeAsModal(async()=>{const _0x1f8dcc=_0xf73f85;await app[_0x1f8dcc(0xed)](_0x1b72ca);},{'commandName':_0xf73f85(0x165)}),{'success':!![]};}catch(_0x425773){return{'success':![],'error':_0x425773[_0xf73f85(0x12c)]};}}async function placeImageFromUrl(_0x21bcf4,_0x2c1b80=![]){const _0x75973e=a0_0x2e32e8;try{let _0x250758;if(_0x21bcf4[_0x75973e(0x114)](_0x75973e(0x163)))_0x250758=await fs[_0x75973e(0x15d)](_0x21bcf4);else{const _0x4e6281=await downloadUrlToTemp(_0x21bcf4,_0x75973e(0x100));_0x250758=await fs[_0x75973e(0x15d)]('file://'+_0x4e6281[_0x75973e(0x11c)]);}return await executeAsModal(async _0x31b739=>{const _0x3867f1=_0x75973e,_0x317153=app[_0x3867f1(0x138)],_0x463fef=await fs[_0x3867f1(0x15f)](_0x250758);await batchPlay([{'_obj':'placeEvent','target':{'_path':_0x463fef,'_kind':_0x3867f1(0x11f)},'linked':!![]}],{});const _0x31244d=_0x317153[_0x3867f1(0xf3)][0x0],_0x2928b2=_0x31244d[_0x3867f1(0x125)],_0x1c341a=_0x2928b2[_0x3867f1(0xe8)]-_0x2928b2['left'],_0x4b7204=_0x2928b2[_0x3867f1(0x127)]-_0x2928b2[_0x3867f1(0x143)],_0x1f94b2=(_0x2928b2[_0x3867f1(0xfd)]+_0x2928b2[_0x3867f1(0xe8)])/0x2,_0x516a71=(_0x2928b2[_0x3867f1(0x143)]+_0x2928b2['bottom'])/0x2;let _0xdaa93d={'left':0x0,'top':0x0,'right':_0x317153[_0x3867f1(0xeb)],'bottom':_0x317153[_0x3867f1(0x140)]};try{const _0x44cb41=_0x317153[_0x3867f1(0xf8)][_0x3867f1(0x13a)];if(_0x44cb41)_0xdaa93d=_0x44cb41;}catch(_0x1153a8){}const _0x46680a=_0xdaa93d['right']-_0xdaa93d[_0x3867f1(0xfd)],_0x5905c8=_0xdaa93d[_0x3867f1(0x127)]-_0xdaa93d[_0x3867f1(0x143)],_0x49a886=(_0xdaa93d['left']+_0xdaa93d['right'])/0x2,_0x50fa4a=(_0xdaa93d[_0x3867f1(0x143)]+_0xdaa93d[_0x3867f1(0x127)])/0x2;let _0x47eb28=0x64,_0x484783=0x64,_0x3531a6=_0x49a886-_0x1f94b2,_0x98a498=_0x50fa4a-_0x516a71;!_0x2c1b80?(_0x47eb28=_0x46680a/_0x1c341a*0x64,_0x484783=_0x5905c8/_0x4b7204*0x64):(_0x3531a6=_0x317153[_0x3867f1(0xeb)]/0x2-_0x1f94b2,_0x98a498=_0x317153['height']/0x2-_0x516a71),await batchPlay([{'_obj':_0x3867f1(0x137),'_target':[{'_ref':_0x3867f1(0x160),'_enum':_0x3867f1(0x112),'_value':_0x3867f1(0xe5)}],'freeTransformCenterState':{'_enum':_0x3867f1(0x14c),'_value':_0x3867f1(0x15a)},'offset':{'_obj':_0x3867f1(0x159),'horizontal':{'_unit':_0x3867f1(0x146),'_value':_0x3531a6},'vertical':{'_unit':'pixelsUnit','_value':_0x98a498}},'width':{'_unit':'percentUnit','_value':_0x47eb28},'height':{'_unit':_0x3867f1(0x110),'_value':_0x484783},'interpolation':{'_enum':_0x3867f1(0x155),'_value':_0x3867f1(0xf9)}}],{}),await batchPlay([{'_obj':_0x3867f1(0x10a),'_target':[{'_ref':_0x3867f1(0x160),'_enum':_0x3867f1(0x112),'_value':_0x3867f1(0xe5)}]}],{});},{'commandName':_0x75973e(0x12d)}),{'success':!![]};}catch(_0x84bb6c){return{'success':![],'error':_0x84bb6c[_0x75973e(0x12c)]};}}function getDocumentInfo(){const _0x2be694=a0_0x2e32e8;if(!app||!app['activeDocument'])return{'hasDocument':![]};const _0x3a096a=app[_0x2be694(0x138)];return{'hasDocument':!![],'width':_0x3a096a['width']['value']||_0x3a096a[_0x2be694(0xeb)],'height':_0x3a096a[_0x2be694(0x140)][_0x2be694(0xf4)]||_0x3a096a[_0x2be694(0x140)]};}function startSelectionListener(_0x260cc2){const _0x3288f6=a0_0x2e32e8;if(!action||!action[_0x3288f6(0x124)])return;let _0x51d5fc=null;const _0x2748a9=()=>{if(isProcessing)return;if(_0x260cc2)_0x260cc2();};action[_0x3288f6(0x124)](['all'],(_0x53f2e6,_0xd78796)=>{const _0x4f9357=_0x3288f6,_0x2c82ae=[_0x4f9357(0x111),_0x4f9357(0x103),_0x4f9357(0x131),'make',_0x4f9357(0x15c),_0x4f9357(0x137),_0x4f9357(0x117),_0x4f9357(0x104),_0x4f9357(0x135)];if(_0x2c82ae['includes'](_0x53f2e6)){const _0x9d57b7=_0xd78796[_0x4f9357(0xea)];let _0x25cbb6=![];_0x9d57b7&&Array[_0x4f9357(0x13b)](_0x9d57b7)&&(_0x25cbb6=_0x9d57b7[_0x4f9357(0x116)](_0x2ec42a=>_0x2ec42a[_0x4f9357(0xf2)]===_0x4f9357(0xff)&&(_0x2ec42a['_value']===_0x4f9357(0xf8)||_0x2ec42a[_0x4f9357(0x119)]===_0x4f9357(0xf8))||_0x2ec42a[_0x4f9357(0xf2)]===_0x4f9357(0xf8)||_0x2ec42a[_0x4f9357(0xf2)]===_0x4f9357(0x12f)&&_0x2ec42a['_property']===_0x4f9357(0xf8)));if(!_0x25cbb6){if([_0x4f9357(0x117),_0x4f9357(0x104),'select']['includes'](_0x53f2e6))_0x25cbb6=!![];else[_0x4f9357(0x15c),_0x4f9357(0x137),_0x4f9357(0x135)][_0x4f9357(0x151)](_0x53f2e6)&&(_0x25cbb6=!![]);}if(_0x25cbb6){if(_0x51d5fc)clearTimeout(_0x51d5fc);_0x51d5fc=setTimeout(_0x2748a9,0x258);}}});}async function listHistoryFiles(){const _0x355a43=a0_0x2e32e8;try{const _0x578017=await fs[_0x355a43(0x11a)](),_0x92f377=await _0x578017[_0x355a43(0x164)](),_0x2b906f=_0x92f377['filter'](_0x47abf9=>_0x47abf9[_0x355a43(0x142)]&&(_0x47abf9[_0x355a43(0xee)][_0x355a43(0x114)](_0x355a43(0xe7))||_0x47abf9[_0x355a43(0xee)][_0x355a43(0x114)](_0x355a43(0x11e)))&&_0x47abf9['name'][_0x355a43(0x132)]('.png'))[_0x355a43(0x157)]((_0x360796,_0x449ba7)=>_0x449ba7['name'][_0x355a43(0x11b)](_0x360796['name']))[_0x355a43(0x120)](_0x527f98=>_0x355a43(0x163)+_0x527f98[_0x355a43(0x11c)]);return{'success':!![],'files':_0x2b906f};}catch(_0x20c4cc){return{'success':![],'error':_0x20c4cc[_0x355a43(0x12c)]};}}async function deleteFile(_0x4cb37f){const _0x5742f2=a0_0x2e32e8;try{if(_0x4cb37f[_0x5742f2(0x114)](_0x5742f2(0x163)))_0x4cb37f=_0x4cb37f[_0x5742f2(0x13f)](_0x5742f2(0x163),'');const _0x1eed9f=_0x4cb37f[_0x5742f2(0x166)]('/')[_0x5742f2(0x133)]();if(!_0x1eed9f)return{'success':![],'error':_0x5742f2(0x109)};const _0x5042cd=await fs[_0x5742f2(0x11a)](),_0x350844=await _0x5042cd[_0x5742f2(0xe6)](_0x1eed9f);if(_0x350844)return await _0x350844[_0x5742f2(0x135)](),{'success':!![]};return{'success':![],'error':_0x5742f2(0x14b)};}catch(_0x143154){return{'success':![],'error':_0x143154[_0x5742f2(0x12c)]};}}async function clearHistoryFiles(){const _0x387839=a0_0x2e32e8;try{const _0x2012d7=await fs[_0x387839(0x11a)](),_0x3eeccf=await _0x2012d7[_0x387839(0x164)](),_0xc1f6d7=_0x3eeccf['filter'](_0x3054c8=>_0x3054c8[_0x387839(0x142)]&&(_0x3054c8[_0x387839(0xee)][_0x387839(0x114)](_0x387839(0xe7))||_0x3054c8['name'][_0x387839(0x114)](_0x387839(0x11e)))&&_0x3054c8[_0x387839(0xee)][_0x387839(0x132)](_0x387839(0xef)));for(const _0x12368c of _0xc1f6d7){await _0x12368c[_0x387839(0x135)]();}return{'success':!![],'count':_0xc1f6d7['length']};}catch(_0x4a47f4){return{'success':![],'error':_0x4a47f4[_0x387839(0x12c)]};}}async function readBinaryFile(_0x1a026b){const _0x19c81f=a0_0x2e32e8;try{if(!_0x1a026b)return{'success':![],'error':_0x19c81f(0x13e)};let _0x20d201=_0x1a026b;if(_0x20d201['startsWith']('file://'))_0x20d201=_0x20d201[_0x19c81f(0x13f)](_0x19c81f(0x163),'');const _0x4a4c7f=_0x20d201[_0x19c81f(0x166)]('/')[_0x19c81f(0x133)](),_0x97a4c0=await fs['getTemporaryFolder'](),_0x5136b9=await _0x97a4c0[_0x19c81f(0xe6)](_0x4a4c7f);if(_0x5136b9&&_0x5136b9[_0x19c81f(0x142)]){const _0x1f1270=await _0x5136b9[_0x19c81f(0x14f)]({'format':formats[_0x19c81f(0x13c)]});return{'success':!![],'buffer':Array[_0x19c81f(0x10f)](new Uint8Array(_0x1f1270))};}return{'success':![],'error':_0x19c81f(0x158)};}catch(_0xc2e063){return{'success':![],'error':_0xc2e063[_0x19c81f(0x12c)]};}}window['photoshopAPI']={'getActiveDocumentImage':getActiveDocumentImage,'createDocFromUrl':createDocFromUrl,'placeImageFromUrl':placeImageFromUrl,'downloadUrlToTemp':downloadUrlToTemp,'getDocumentInfo':getDocumentInfo,'startSelectionListener':startSelectionListener,'listHistoryFiles':listHistoryFiles,'deleteFile':deleteFile,'clearHistoryFiles':clearHistoryFiles,'pickLocalFile':pickLocalFile,'readBinaryFile':readBinaryFile,'showAlert':_0x26e28e=>app['showAlert'](_0x26e28e)};